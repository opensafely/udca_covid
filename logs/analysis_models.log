
. 
. * Open file to write results to 
. file open tablecontent using ./output/tables/cox_models.txt, write text repla
> ce
(note: file ./output/tables/cox_models.txt not found)

. file write tablecontent ("Outcome") _tab ("Exposure status") _tab ("denominat
> or") _tab ("events") _tab ("total_person_wks") _tab ("Rate") _tab ("unadj_hr"
> ) _tab ///
> ("unadj_ci") _tab ("unadj_lci") _tab ("unadj_uci")  _tab ("p_adj_hr") _tab ("
> p_adj_ci") _tab ("p_adj_lci") _tab ("p_adj_uci") _tab ("f_adj_hr") _tab ("f_a
> dj_ci") _tab ("f_adj_lci") _tab ("f_adj_uci") _tab  _n

. 
. * Cox models and Schoenfeld residual plots for each outcome
. foreach outcome in died_covid_any hosp_any composite_any {
  2.     use ./output/an_dataset_`outcome', clear 
  3.     * Open file to write results
.     describe
  4.     gen index_date = date("01/03/2020", "DMY")
  5.     stset stop, fail(`outcome'_flag) id(patient_id) enter(index_date) orig
> in(index_date)
  6.     count if `outcome'_flag==1
  7.     if r(N) > 10 {
  8.         sts graph, by(udca) title("`outcome'") graphregion(fcolor(white)) 
> ylabel(.75(.1)1)
  9.         graph export ./output/graphs/km_`outcome'.svg, as(svg) replace
 10.         * Cox model - crude
.         stcox udca, strata(stp) vce(robust)
 11.         estimates save "./output/tempdata/crude_`outcome'", replace 
 12.         eststo model1
 13.         parmest, label eform format(estimate p lb ub) saving("./output/tem
> pdata/surv_crude_`outcome'", replace) idstr("crude_`outcome'") 
 14.         estat phtest, detail
 15.         * Plot schoenfeld residuals 
.         estat phtest, plot(udca) ///
>                     graphregion(fcolor(white)) ///
>                     ylabel(, nogrid labsize(small)) ///
>                     xlabel(, labsize(small)) ///
>                     xtitle("Time", size(small)) ///
>                     ytitle("Scaled Schoenfeld Residuals", size(small)) ///
>                     msize(small) ///
>                     mcolor(gs6) ///
>                     msymbol(circle_hollow) ///
>                     scheme(s1mono) ///
>                     title ("`outcome'", position(11) size(medsmall)) ///
>                     name(uni_plot_`outcome') ///
>                     note("")
 16.         * Cox model - age and sex adjusted
.         stcox udca age_tv male, strata(stp) vce(robust)
 17.         estimates save "./output/tempdata/p_adj_model_`outcome'", replace 
 18.         eststo model2
 19.         parmest, label eform format(estimate p lb ub) saving("./output/tem
> pdata/p_surv_adj_`outcome'", replace) idstr("adj_`outcome'") 
 20.         estat phtest, detail
 21.         * Cox model - fully adjusted
.         stcox udca age_tv male any_high_risk_condition i.ethnicity i.imd ib2.
> bmi_cat i.smoking severe_disease covid_vacc_first liver_trans, strata(stp) vc
> e(robust)
 22.         estimates save "./output/tempdata/adj_model_`outcome'", replace 
 23.         eststo model3
 24.         parmest, label eform format(estimate p lb ub) saving("./output/tem
> pdata/surv_adj_`outcome'", replace) idstr("adj_`outcome'") 
 25.         estat phtest, detail
 26.         * Plot Schoenfeld residuals 
.         estat phtest, plot(udca) ///
>                     graphregion(fcolor(white)) ///
>                     ylabel(, nogrid labsize(small)) ///
>                     xlabel(, labsize(small)) ///
>                     xtitle("Time", size(small)) ///
>                     ytitle("Scaled Schoenfeld Residuals", size(small)) ///
>                     msize(small) ///
>                     mcolor(gs6) ///
>                     msymbol(circle_hollow) ///
>                     scheme(s1mono) ///
>                     title ("Adjusted `outcome'", position(11) size(medsmall))
>  ///
>                     name(adj_plot_`outcome') ///
>                     note("")
 27.         graph combine uni_plot_`outcome' adj_plot_`outcome'
 28.         graph export ./output/graphs/schoenplot_`outcome'.svg, as(svg) rep
> lace 
 29.         * Cox model - fully adjusted with binary ethnicity variable 
.         stcox udca age_tv male any_high_risk_condition i.eth_bin i.imd ib2.bm
> i_cat i.smoking severe_disease covid_vacc_first liver_trans, strata(stp) vce(
> robust)
 30.         * flag single row for each person
.         bys patient_id (start): gen number = _n==_N 
 31.         tab number 
 32.         * Count number unexposed at any time 
.         bys patient_id : egen unexposed_ever = min(udca) 
 33.         tab unexposed_ever if number==1
 34.         safecount if unexposed_ever==1 & number==1
 35.         local denominator = r(N)
 36.         safecount if udca == 0 & `outcome'_flag == 1
 37.         local event = r(N)
 38.         di "no udca events = " `event'
 39.         bysort udca: egen total_follow_up = total(_t) if number==1
 40.         su total_follow_up if udca==0 & number==1
 41.         local person_mth = r(mean)/30
 42.         di `person_mth'
 43.         local rate = 100000*(`event'/`person_mth')
 44.         di `rate'
 45.         if `event'>10 & `event'!=. {
 46.             file write tablecontent  ("`outcome'") _tab ("No UDCA") _tab (
> `denominator') _tab (`event') _tab %10.0f (`person_mth') _tab %3.2f (`rate') 
> _tab
 47.             file write tablecontent ("1.00") _tab _tab ("1.00")  _n
 48.             }
 49.         else {
 50.             file write tablecontent ("`outcome'") _tab ("No UDCA") _tab ("
> redact") _n
 51.             continue
 52.         }
 53.         * Count number exposed at any time 
.         bys patient_id : egen exposed_ever = max(udca) 
 54.         tab exposed_ever if number==1
 55.         qui safecount if exposed_ever==1 & number==1
 56.         local denominator = r(N)
 57.         qui safecount if udca == 1 & `outcome'_flag == 1
 58.         local event = r(N)
 59.         di "udca events = " `event'
 60.         qui su total_follow_up if udca==1 & number==1
 61.         local person_mth = r(mean)/30
 62.         local rate = 100000*(`event'/`person_mth')
 63.         if `event'>10 & `event'!=. {
 64.             file write tablecontent ("`outcome'") _tab ("UDCA") _tab (`den
> ominator') _tab (`event') _tab %10.0f (`person_mth') _tab %3.2f (`rate') _tab
 65.             cap estimates use "./output/tempdata/crude_`outcome'" 
 66.             cap lincom udca, eform
 67.             file write tablecontent  %4.2f (r(estimate)) _tab ("(") %4.2f 
> (r(lb)) (" - ") %4.2f (r(ub)) (")") _tab %4.2f (r(lb)) _tab %4.2f (r(ub)) _ta
> b 
 68.             cap estimates clear
 69.             cap estimates use "./output/tempdata/p_adj_model_`outcome'" 
 70.             cap lincom udca, eform
 71.             file write tablecontent  %4.2f (r(estimate)) _tab ("(") %4.2f 
> (r(lb)) (" - ") %4.2f (r(ub)) (")") _tab %4.2f (r(lb)) _tab %4.2f (r(ub)) _ta
> b 
 72.             cap estimates clear
 73.             cap estimates use "./output/tempdata/adj_model_`outcome'" 
 74.             cap lincom udca, eform
 75.             file write tablecontent  %4.2f (r(estimate)) _tab ("(") %4.2f 
> (r(lb)) (" - ") %4.2f (r(ub)) (")") _tab %4.2f (r(lb)) _tab %4.2f (r(ub)) _ta
> b _n 
 76.             cap estimates clear
 77.         }
 78.         else {
 79.             file write tablecontent  ("`outcome'") _tab ("UDCA") _tab ("re
> dact") _n
 80.             continue
 81.         }
 82.     
. drop total_follow_up
 83.     }
 84. else { 
 85.     file write tablecontent ("`outcome'") _tab ("redact") _n
 86.     continue
 87. }
 88. }

Contains data from ./output/an_dataset_died_covid_any.dta
  obs:         2,946                          
 vars:            17                          22 Aug 2023 12:37
-------------------------------------------------------------------------------
              storage   display    value
variable name   type    format     label      variable label
-------------------------------------------------------------------------------
stp             str4    %9s                   
imd             byte    %8.0g                 
ethnicity       byte    %8.0g      eth5       
patient_id      int     %8.0g                 
male            float   %9.0g                 
eth_bin         float   %9.0g      eth2       
bmi_cat         float   %14.0g     bmi        
smoking         float   %14.0g     smok       
any_high_risk~n float   %9.0g                 
start           float   %9.0g                 
stop            float   %9.0g                 
died_covid_an~g byte    %8.0g                 
age_tv          float   %9.0g                 
udca            float   %9.0g                 
liver_trans     float   %9.0g                 
covid_vacc_fi~t float   %9.0g                 
severe_disease  float   %9.0g                 
-------------------------------------------------------------------------------
Sorted by: 

                id:  patient_id
     failure event:  died_covid_any_flag != 0 & died_covid_any_flag < .
obs. time interval:  (stop[_n-1], stop]
 enter on or after:  time index_date
 exit on or before:  failure
    t for analysis:  (time-origin)
            origin:  time index_date

------------------------------------------------------------------------------
      2,946  total observations
          0  exclusions
------------------------------------------------------------------------------
      2,946  observations remaining, representing
      1,000  subjects
        153  failures in single-failure-per-subject data
    651,528  total analysis time at risk and under observation
                                                at risk from t =         0
                                     earliest observed entry t =         0
                                          last observed exit t =     1,035
  153

         failure _d:  died_covid_any_flag
   analysis time _t:  (stop-origin)
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id
(note: file ./output/graphs/km_died_covid_any.svg not found)
(file ./output/graphs/km_died_covid_any.svg written in SVG format)

         failure _d:  died_covid_any_flag
   analysis time _t:  (stop-origin)
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log pseudolikelihood = -361.07731
Iteration 1:   log pseudolikelihood = -360.49144
Iteration 2:   log pseudolikelihood = -360.47191
Iteration 3:   log pseudolikelihood = -360.47187
Refining estimates:
Iteration 0:   log pseudolikelihood = -360.47187

Stratified Cox regr. -- no ties

No. of subjects      =        1,000             Number of obs    =       1,446
No. of failures      =          153
Time at risk         =       651528
                                                Wald chi2(1)     =        1.01
Log pseudolikelihood =   -360.47187             Prob > chi2      =      0.3138

                           (Std. Err. adjusted for 500 clusters in patient_id)
------------------------------------------------------------------------------
             |               Robust
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        udca |   .5926041   .3078428    -1.01   0.314     .2140854    1.640372
------------------------------------------------------------------------------
                                                             Stratified by stp
file ./output/tempdata/crude_died_covid_any.ster saved
file ./output/tempdata/surv_crude_died_covid_any.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      udca        |     -0.07993         0.50        1         0.4803
      ------------+---------------------------------------------------
      global test |                      0.50        1         0.4803
      ----------------------------------------------------------------

note: robust variance-covariance matrix used.

         failure _d:  died_covid_any_flag
   analysis time _t:  (stop-origin)
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log pseudolikelihood = -360.18634
Iteration 1:   log pseudolikelihood = -357.81299
Iteration 2:   log pseudolikelihood =  -357.7883
Iteration 3:   log pseudolikelihood = -357.78825
Refining estimates:
Iteration 0:   log pseudolikelihood = -357.78825

Stratified Cox regr. -- no ties

No. of subjects      =          990             Number of obs    =       1,428
No. of failures      =          150
Time at risk         =       645699
                                                Wald chi2(3)     =        4.81
Log pseudolikelihood =   -357.78825             Prob > chi2      =      0.1865

                           (Std. Err. adjusted for 496 clusters in patient_id)
------------------------------------------------------------------------------
             |               Robust
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        udca |   .5468036   .2932763    -1.13   0.260     .1911139    1.564482
      age_tv |   .9937111   .0049572    -1.26   0.206     .9840425    1.003475
        male |   1.388781   .3225009     1.41   0.157     .8809857    2.189267
------------------------------------------------------------------------------
                                                             Stratified by stp
(note: file ./output/tempdata/p_adj_model_died_covid_any.ster not found)
file ./output/tempdata/p_adj_model_died_covid_any.ster saved
(note: file ./output/tempdata/p_surv_adj_died_covid_any.dta not found)
file ./output/tempdata/p_surv_adj_died_covid_any.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      udca        |     -0.07347         0.47        1         0.4914
      age_tv      |     -0.03624         0.12        1         0.7281
      male        |     -0.03869         0.13        1         0.7211
      ------------+---------------------------------------------------
      global test |                      0.76        3         0.8589
      ----------------------------------------------------------------

note: robust variance-covariance matrix used.

         failure _d:  died_covid_any_flag
   analysis time _t:  (stop-origin)
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

note: any_high_risk_condition omitted because of collinearity
Iteration 0:   log pseudolikelihood = -360.18634
Iteration 1:   log pseudolikelihood = -345.85906
Iteration 2:   log pseudolikelihood = -345.04059
Iteration 3:   log pseudolikelihood = -344.97376
Iteration 4:   log pseudolikelihood = -344.95222
Iteration 5:   log pseudolikelihood = -344.94431
Iteration 6:   log pseudolikelihood =  -344.9414
Iteration 7:   log pseudolikelihood = -344.94033
Iteration 8:   log pseudolikelihood = -344.93993
Iteration 9:   log pseudolikelihood = -344.93979
Iteration 10:  log pseudolikelihood = -344.93974
Iteration 11:  log pseudolikelihood = -344.93972
Iteration 12:  log pseudolikelihood = -344.93971
Iteration 13:  log pseudolikelihood = -344.93971
Iteration 14:  log pseudolikelihood =  -344.9397
Iteration 15:  log pseudolikelihood =  -344.9397
Iteration 16:  log pseudolikelihood =  -344.9397
Iteration 17:  log pseudolikelihood =  -344.9397
Iteration 18:  log pseudolikelihood =  -344.9397
Iteration 19:  log pseudolikelihood =  -344.9397
Iteration 20:  log pseudolikelihood =  -344.9397
Iteration 21:  log pseudolikelihood =  -344.9397
Iteration 22:  log pseudolikelihood =  -344.9397
Iteration 23:  log pseudolikelihood =  -344.9397
Iteration 24:  log pseudolikelihood =  -344.9397
Iteration 25:  log pseudolikelihood =  -344.9397
Iteration 26:  log pseudolikelihood =  -344.9397
Iteration 27:  log pseudolikelihood =  -344.9397
Iteration 28:  log pseudolikelihood =  -344.9397
Iteration 29:  log pseudolikelihood =  -344.9397
Iteration 30:  log pseudolikelihood =  -344.9397
Refining estimates:
Iteration 0:   log pseudolikelihood =  -344.9397
Iteration 1:   log pseudolikelihood =  -344.9397

Stratified Cox regr. -- no ties

No. of subjects      =          990             Number of obs    =       1,428
No. of failures      =          150
Time at risk         =       645699
                                                Wald chi2(22)    =     2394.77
Log pseudolikelihood =    -344.9397             Prob > chi2      =      0.0000

                           (Std. Err. adjusted for 496 clusters in patient_id)
------------------------------------------------------------------------------
             |               Robust
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        udca |   .5570536   .3006849    -1.08   0.278     .1933916    1.604561
      age_tv |   .9936457   .0050879    -1.24   0.213     .9837234    1.003668
        male |   1.513806   .3742027     1.68   0.093     .9325216    2.457432
any_high_r~n |          1  (omitted)
             |
   ethnicity |
      Mixed  |   .9601576   .3756018    -0.10   0.917     .4460289    2.066912
      Asian  |   .9861726   .3891296    -0.04   0.972     .4550728      2.1371
      Black  |   1.007816      .4113     0.02   0.985     .4528949     2.24267
      Other  |   .8725619   .3463365    -0.34   0.731     .4008096    1.899566
    Unknown  |   1.410919   .6613258     0.73   0.463     .5630241    3.535714
             |
         imd |
          2  |   1.561672   .5687628     1.22   0.221     .7648589    3.188588
          3  |   1.956848   .7507089     1.75   0.080     .9225907    4.150543
          4  |   1.145407   .4475939     0.35   0.728     .5325172    2.463691
          5  |   .8876388   .3727992    -0.28   0.777      .389709    2.021772
          6  |   1.028408   .7256111     0.04   0.968     .2579795    4.099638
             |
     bmi_cat |
Underweight  |   1.274979   .6195551     0.50   0.617     .4918986    3.304688
 Overweight  |   1.700119   .5159461     1.75   0.080     .9379067    3.081761
      Obese  |   1.217692   .3745013     0.64   0.522     .6664239    2.224972
Morbidly ..  |    .482346   .3790887    -0.93   0.354     .1033657     2.25082
             |
     smoking |
Current s..  |   2.475796   1.326633     1.69   0.091     .8661763    7.076582
  Ex-smoker  |   .6733958    .473404    -0.56   0.574     .1697724    2.670999
             |
severe_dis~e |   .7438356   .1763925    -1.25   0.212     .4673302    1.183941
covid_vacc~t |   1.093621   .3785767     0.26   0.796     .5548914    2.155389
 liver_trans |   3.97e-14   2.70e-14   -45.39   0.000     1.05e-14    1.50e-13
------------------------------------------------------------------------------
                                                             Stratified by stp
(note: file ./output/tempdata/adj_model_died_covid_any.ster not found)
file ./output/tempdata/adj_model_died_covid_any.ster saved
(note: file ./output/tempdata/surv_adj_died_covid_any.dta not found)
file ./output/tempdata/surv_adj_died_covid_any.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      udca        |     -0.05266         0.34        1         0.5594
      age_tv      |      0.01039         0.01        1         0.9081
      male        |     -0.06719         0.76        1         0.3819
      o.any_high~n|            .            .        1             .
      1b.ethnicity|            .            .        1             .
      2.ethnicity |     -0.12373         2.32        1         0.1279
      3.ethnicity |     -0.05186         0.43        1         0.5111
      4.ethnicity |     -0.07195         0.59        1         0.4441
      5.ethnicity |     -0.13362         2.24        1         0.1347
      6.ethnicity |      0.06590         0.57        1         0.4498
      1b.imd      |            .            .        1             .
      2.imd       |     -0.19160         3.72        1         0.0537
      3.imd       |     -0.10847         1.46        1         0.2269
      4.imd       |     -0.06305         0.50        1         0.4811
      5.imd       |      0.00285         0.00        1         0.9766
      6.imd       |     -0.14786         3.02        1         0.0823
      1.bmi_cat   |     -0.10840         1.35        1         0.2444
      2b.bmi_cat  |            .            .        1             .
      3.bmi_cat   |      0.08776         0.95        1         0.3299
      4.bmi_cat   |      0.03357         0.14        1         0.7100
      5.bmi_cat   |      0.07032         0.81        1         0.3692
      0b.smoking  |            .            .        1             .
      1.smoking   |     -0.04358         0.28        1         0.5960
      2.smoking   |      0.02071         0.05        1         0.8174
      severe_dis~e|      0.02330         0.06        1         0.8019
      covid_vacc~t|      0.03770         0.12        1         0.7287
      liver_trans |      0.00038         0.00        1         0.9989
      ------------+---------------------------------------------------
      global test |                     16.25       22         0.8034
      ----------------------------------------------------------------

note: robust variance-covariance matrix used.
(note: file ./output/graphs/schoenplot_died_covid_any.svg not found)
(file ./output/graphs/schoenplot_died_covid_any.svg written in SVG format)

         failure _d:  died_covid_any_flag
   analysis time _t:  (stop-origin)
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

note: any_high_risk_condition omitted because of collinearity
Iteration 0:   log pseudolikelihood = -360.18634
Iteration 1:   log pseudolikelihood = -346.29288
Iteration 2:   log pseudolikelihood = -345.54063
Iteration 3:   log pseudolikelihood =  -345.4725
Iteration 4:   log pseudolikelihood = -345.45076
Iteration 5:   log pseudolikelihood = -345.44277
Iteration 6:   log pseudolikelihood = -345.43983
Iteration 7:   log pseudolikelihood = -345.43875
Iteration 8:   log pseudolikelihood = -345.43836
Iteration 9:   log pseudolikelihood = -345.43821
Iteration 10:  log pseudolikelihood = -345.43816
Iteration 11:  log pseudolikelihood = -345.43814
Iteration 12:  log pseudolikelihood = -345.43813
Iteration 13:  log pseudolikelihood = -345.43813
Iteration 14:  log pseudolikelihood = -345.43813
Iteration 15:  log pseudolikelihood = -345.43813
Iteration 16:  log pseudolikelihood = -345.43813
Iteration 17:  log pseudolikelihood = -345.43813
Iteration 18:  log pseudolikelihood = -345.43813
Iteration 19:  log pseudolikelihood = -345.43813
Iteration 20:  log pseudolikelihood = -345.43813
Iteration 21:  log pseudolikelihood = -345.43813
Iteration 22:  log pseudolikelihood = -345.43813
Iteration 23:  log pseudolikelihood = -345.43813
Iteration 24:  log pseudolikelihood = -345.43813
Iteration 25:  log pseudolikelihood = -345.43813
Iteration 26:  log pseudolikelihood = -345.43813
Iteration 27:  log pseudolikelihood = -345.43813
Iteration 28:  log pseudolikelihood = -345.43813
Iteration 29:  log pseudolikelihood = -345.43813
Iteration 30:  log pseudolikelihood = -345.43813
Refining estimates:
Iteration 0:   log pseudolikelihood = -345.43813
Iteration 1:   log pseudolikelihood = -345.43813
Iteration 2:   log pseudolikelihood = -345.43813

Stratified Cox regr. -- no ties

No. of subjects      =          990             Number of obs    =       1,428
No. of failures      =          150
Time at risk         =       645699
                                                Wald chi2(18)    =     2524.61
Log pseudolikelihood =   -345.43813             Prob > chi2      =      0.0000

                           (Std. Err. adjusted for 496 clusters in patient_id)
------------------------------------------------------------------------------
             |               Robust
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        udca |   .5435847   .2913994    -1.14   0.255     .1900919    1.554429
      age_tv |   .9933686   .0048522    -1.36   0.173     .9839038    1.002924
        male |   1.496595   .3672233     1.64   0.100      .925215    2.420838
any_high_r~n |          1  (omitted)
             |
     eth_bin |
  Non-White  |   .9918501    .311199    -0.03   0.979     .5362612    1.834491
             |
         imd |
          2  |   1.567955   .5781882     1.22   0.223      .761115    3.230106
          3  |   1.997219   .7591064     1.82   0.069     .9481988    4.206799
          4  |   1.160101   .4505348     0.38   0.702     .5419065    2.483516
          5  |   .8959741   .3802886    -0.26   0.796     .3899511    2.058641
          6  |    1.05361   .7357773     0.07   0.940     .2680727     4.14102
             |
     bmi_cat |
Underweight  |   1.269721   .6050405     0.50   0.616     .4989974    3.230861
 Overweight  |   1.723217   .5236238     1.79   0.073     .9499275    3.126005
      Obese  |   1.224375   .3781233     0.66   0.512     .6684027    2.242801
Morbidly ..  |   .4663456   .3608731    -0.99   0.324     .1023342    2.125175
             |
     smoking |
Current s..  |   2.541316   1.356587     1.75   0.081     .8926398    7.235041
  Ex-smoker  |   .6892154   .4892455    -0.52   0.600      .171444    2.770688
             |
severe_dis~e |   .7582816   .1798753    -1.17   0.243     .4763359    1.207113
covid_vacc~t |   1.077186    .372805     0.21   0.830     .5466346    2.122679
 liver_trans |   1.37e-14   9.23e-15   -47.36   0.000     3.65e-15    5.13e-14
------------------------------------------------------------------------------
                                                             Stratified by stp

     number |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      1,946       66.06       66.06
          1 |      1,000       33.94      100.00
------------+-----------------------------------
      Total |      2,946      100.00

unexposed_e |
        ver |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      1,000      100.00      100.00
------------+-----------------------------------
      Total |      1,000      100.00
  0
  139
no udca events = 139
(1946 missing values generated)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
total_foll~p |        897      584131           0     584131     584131
19471.033
713.88096

exposed_eve |
          r |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        897       89.70       89.70
          1 |        103       10.30      100.00
------------+-----------------------------------
      Total |      1,000      100.00
udca events = 14

Contains data from ./output/an_dataset_hosp_any.dta
  obs:         2,870                          
 vars:            18                          22 Aug 2023 12:37
-------------------------------------------------------------------------------
              storage   display    value
variable name   type    format     label      variable label
-------------------------------------------------------------------------------
stp             str4    %9s                   
imd             byte    %8.0g                 
ethnicity       byte    %8.0g      eth5       
patient_id      int     %8.0g                 
male            float   %9.0g                 
eth_bin         float   %9.0g      eth2       
bmi_cat         float   %14.0g     bmi        
smoking         float   %14.0g     smok       
any_high_risk~n float   %9.0g                 
start           float   %9.0g                 
stop            float   %9.0g                 
hosp_any_flag   float   %9.0g                 
age_tv          float   %9.0g                 
udca            float   %9.0g                 
liver_trans     float   %9.0g                 
covid_vacc_fi~t float   %9.0g                 
severe_disease  float   %9.0g                 
total_hosp      float   %9.0g                 
-------------------------------------------------------------------------------
Sorted by: 

                id:  patient_id
     failure event:  hosp_any_flag != 0 & hosp_any_flag < .
obs. time interval:  (stop[_n-1], stop]
 enter on or after:  time index_date
 exit on or before:  failure
    t for analysis:  (time-origin)
            origin:  time index_date

------------------------------------------------------------------------------
      2,870  total observations
          0  exclusions
------------------------------------------------------------------------------
      2,870  observations remaining, representing
      1,000  subjects
         58  failures in single-failure-per-subject data
    630,402  total analysis time at risk and under observation
                                                at risk from t =         0
                                     earliest observed entry t =         0
                                          last observed exit t =     1,035
  58

         failure _d:  hosp_any_flag
   analysis time _t:  (stop-origin)
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id
(note: file ./output/graphs/km_hosp_any.svg not found)
(file ./output/graphs/km_hosp_any.svg written in SVG format)

         failure _d:  hosp_any_flag
   analysis time _t:  (stop-origin)
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log pseudolikelihood = -145.73668
Iteration 1:   log pseudolikelihood = -145.44108
Iteration 2:   log pseudolikelihood = -145.42683
Iteration 3:   log pseudolikelihood = -145.42682
Refining estimates:
Iteration 0:   log pseudolikelihood = -145.42682

Stratified Cox regr. -- Breslow method for ties

No. of subjects      =        1,000             Number of obs    =       1,407
No. of failures      =           58
Time at risk         =       630402
                                                Wald chi2(1)     =        0.67
Log pseudolikelihood =   -145.42682             Prob > chi2      =      0.4119

                           (Std. Err. adjusted for 500 clusters in patient_id)
------------------------------------------------------------------------------
             |               Robust
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        udca |   1.562364   .8495755     0.82   0.412     .5381699    4.535706
------------------------------------------------------------------------------
                                                             Stratified by stp
(note: file ./output/tempdata/crude_hosp_any.ster not found)
file ./output/tempdata/crude_hosp_any.ster saved
(note: file ./output/tempdata/surv_crude_hosp_any.dta not found)
file ./output/tempdata/surv_crude_hosp_any.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      udca        |     -0.04197         0.06        1         0.8121
      ------------+---------------------------------------------------
      global test |                      0.06        1         0.8121
      ----------------------------------------------------------------

note: robust variance-covariance matrix used.

         failure _d:  hosp_any_flag
   analysis time _t:  (stop-origin)
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log pseudolikelihood = -145.40832
Iteration 1:   log pseudolikelihood =  -145.0496
Iteration 2:   log pseudolikelihood = -145.03693
Iteration 3:   log pseudolikelihood = -145.03692
Refining estimates:
Iteration 0:   log pseudolikelihood = -145.03692

Stratified Cox regr. -- Breslow method for ties

No. of subjects      =          990             Number of obs    =       1,389
No. of failures      =           58
Time at risk         =       624573
                                                Wald chi2(3)     =        0.83
Log pseudolikelihood =   -145.03692             Prob > chi2      =      0.8412

                           (Std. Err. adjusted for 496 clusters in patient_id)
------------------------------------------------------------------------------
             |               Robust
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        udca |   1.514911   .8377779     0.75   0.453     .5124534    4.478367
      age_tv |   1.002619   .0083434     0.31   0.753     .9863987    1.019106
        male |   1.067692    .387478     0.18   0.857     .5242458    2.174488
------------------------------------------------------------------------------
                                                             Stratified by stp
(note: file ./output/tempdata/p_adj_model_hosp_any.ster not found)
file ./output/tempdata/p_adj_model_hosp_any.ster saved
(note: file ./output/tempdata/p_surv_adj_hosp_any.dta not found)
file ./output/tempdata/p_surv_adj_hosp_any.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      udca        |     -0.07731         0.21        1         0.6490
      age_tv      |     -0.03667         0.07        1         0.7974
      male        |      0.30204         2.64        1         0.1042
      ------------+---------------------------------------------------
      global test |                      2.78        3         0.4273
      ----------------------------------------------------------------

note: robust variance-covariance matrix used.

         failure _d:  hosp_any_flag
   analysis time _t:  (stop-origin)
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

note: any_high_risk_condition omitted because of collinearity
Iteration 0:   log pseudolikelihood = -145.40832
Iteration 1:   log pseudolikelihood = -130.19678
Iteration 2:   log pseudolikelihood = -128.44623
Iteration 3:   log pseudolikelihood = -128.19537
Iteration 4:   log pseudolikelihood = -128.13446
Iteration 5:   log pseudolikelihood = -128.11246
Iteration 6:   log pseudolikelihood = -128.10437
Iteration 7:   log pseudolikelihood =  -128.1014
Iteration 8:   log pseudolikelihood =  -128.1003
Iteration 9:   log pseudolikelihood =  -128.0999
Iteration 10:  log pseudolikelihood = -128.09975
Iteration 11:  log pseudolikelihood =  -128.0997
Iteration 12:  log pseudolikelihood = -128.09968
Iteration 13:  log pseudolikelihood = -128.09967
Iteration 14:  log pseudolikelihood = -128.09967
Iteration 15:  log pseudolikelihood = -128.09967
Iteration 16:  log pseudolikelihood = -128.09967
Iteration 17:  log pseudolikelihood = -128.09967
Iteration 18:  log pseudolikelihood = -128.09967
Iteration 19:  log pseudolikelihood = -128.09967
Iteration 20:  log pseudolikelihood = -128.09967
Iteration 21:  log pseudolikelihood = -128.09967
Iteration 22:  log pseudolikelihood = -128.09967
Iteration 23:  log pseudolikelihood = -128.09967
Iteration 24:  log pseudolikelihood = -128.09967
Iteration 25:  log pseudolikelihood = -128.09967
Iteration 26:  log pseudolikelihood = -128.09967
Iteration 27:  log pseudolikelihood = -128.09967
Iteration 28:  log pseudolikelihood = -128.09967
Iteration 29:  log pseudolikelihood = -128.09967
Iteration 30:  log pseudolikelihood = -128.09967
Iteration 31:  log pseudolikelihood = -128.09967
Iteration 32:  log pseudolikelihood = -128.09967
Iteration 33:  log pseudolikelihood = -128.09967
Iteration 34:  log pseudolikelihood = -128.09967
Iteration 35:  log pseudolikelihood = -128.09967
Iteration 36:  log pseudolikelihood = -128.09967
Iteration 37:  log pseudolikelihood = -128.09967
Iteration 38:  log pseudolikelihood = -128.09967
Iteration 39:  log pseudolikelihood = -128.09967
Refining estimates:
Iteration 0:   log pseudolikelihood = -128.09967
Iteration 1:   log pseudolikelihood = -128.09967

Stratified Cox regr. -- Breslow method for ties

No. of subjects      =          990             Number of obs    =       1,389
No. of failures      =           58
Time at risk         =       624573
                                                Wald chi2(22)    =    11335.74
Log pseudolikelihood =   -128.09967             Prob > chi2      =      0.0000

                           (Std. Err. adjusted for 496 clusters in patient_id)
------------------------------------------------------------------------------
             |               Robust
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        udca |   1.575104   .8103661     0.88   0.377     .5746185    4.317566
      age_tv |   1.006111   .0081741     0.75   0.453     .9902173    1.022261
        male |   1.042929   .3982855     0.11   0.912     .4933873    2.204556
any_high_r~n |          1  (omitted)
             |
   ethnicity |
      Mixed  |   1.483586   .9061183     0.65   0.518      .448158    4.911277
      Asian  |   1.159393   .7606437     0.23   0.822     .3204665    4.194489
      Black  |   1.284572   .8922451     0.36   0.718     .3292504    5.011765
      Other  |   1.026006   .6497246     0.04   0.968     .2965661    3.549592
    Unknown  |   .7056598    .775223    -0.32   0.751     .0819376    6.077255
             |
         imd |
          2  |    8.66383    9.34336     2.00   0.045     1.046517    71.72553
          3  |   9.776369   10.12303     2.20   0.028     1.284675    74.39814
          4  |    8.78241   9.424168     2.02   0.043     1.072043    71.94741
          5  |   8.110226   8.799694     1.93   0.054     .9670944     68.0138
          6  |   2.31e-17   2.50e-17   -35.25   0.000     2.74e-18    1.94e-16
             |
     bmi_cat |
Underweight  |   .3910875    .397788    -0.92   0.356     .0532708    2.871171
 Overweight  |   .1525805   .1616164    -1.77   0.076     .0191377    1.216492
      Obese  |   1.590132   .6710453     1.10   0.272     .6953777     3.63618
Morbidly ..  |   .4900554   .4949777    -0.71   0.480     .0676852    3.548106
             |
     smoking |
Current s..  |   3.210472   3.280939     1.14   0.254     .4331957    23.79324
  Ex-smoker  |   2.948613   3.105246     1.03   0.305     .3742826    23.22929
             |
severe_dis~e |   .3800302   .1568513    -2.34   0.019     .1692383    .8533707
covid_vacc~t |   1.309458   .6434835     0.55   0.583     .4998051    3.430696
 liver_trans |   6.07e-18   5.70e-18   -42.20   0.000     9.62e-19    3.82e-17
------------------------------------------------------------------------------
                                                             Stratified by stp
(note: file ./output/tempdata/adj_model_hosp_any.ster not found)
file ./output/tempdata/adj_model_hosp_any.ster saved
(note: file ./output/tempdata/surv_adj_hosp_any.dta not found)
file ./output/tempdata/surv_adj_hosp_any.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      udca        |     -0.14036         1.13        1         0.2879
      age_tv      |     -0.11359         1.36        1         0.2428
      male        |      0.22881         4.51        1         0.0336
      o.any_high~n|            .            .        1             .
      1b.ethnicity|            .            .        1             .
      2.ethnicity |     -0.20178         2.08        1         0.1495
      3.ethnicity |      0.18650         1.66        1         0.1976
      4.ethnicity |      0.18840         2.50        1         0.1137
      5.ethnicity |      0.20991         1.84        1         0.1750
      6.ethnicity |      0.17478         1.53        1         0.2155
      1b.imd      |            .            .        1             .
      2.imd       |     -0.19755         2.03        1         0.1542
      3.imd       |     -0.30408         4.79        1         0.0286
      4.imd       |     -0.39708        10.44        1         0.0012
      5.imd       |     -0.39002         9.49        1         0.0021
      6.imd       |     -0.31215         4.41        1         0.0357
      1.bmi_cat   |      0.13144         1.56        1         0.2118
      2b.bmi_cat  |            .            .        1             .
      3.bmi_cat   |      0.31876        10.48        1         0.0012
      4.bmi_cat   |      0.32761         8.54        1         0.0035
      5.bmi_cat   |      0.32506         5.22        1         0.0223
      0b.smoking  |            .            .        1             .
      1.smoking   |      0.18452         2.08        1         0.1492
      2.smoking   |      0.06391         0.20        1         0.6524
      severe_dis~e|     -0.09325         0.76        1         0.3840
      covid_vacc~t|      0.19067         1.76        1         0.1842
      liver_trans |     -0.26272         1.68        1         0.1953
      ------------+---------------------------------------------------
      global test |                     36.27       22         0.0284
      ----------------------------------------------------------------

note: robust variance-covariance matrix used.
(note: file ./output/graphs/schoenplot_hosp_any.svg not found)
(file ./output/graphs/schoenplot_hosp_any.svg written in SVG format)

         failure _d:  hosp_any_flag
   analysis time _t:  (stop-origin)
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

note: any_high_risk_condition omitted because of collinearity
Iteration 0:   log pseudolikelihood = -145.40832
Iteration 1:   log pseudolikelihood = -130.57075
Iteration 2:   log pseudolikelihood = -128.84516
Iteration 3:   log pseudolikelihood = -128.59149
Iteration 4:   log pseudolikelihood = -128.52988
Iteration 5:   log pseudolikelihood = -128.50763
Iteration 6:   log pseudolikelihood = -128.49945
Iteration 7:   log pseudolikelihood = -128.49644
Iteration 8:   log pseudolikelihood = -128.49534
Iteration 9:   log pseudolikelihood = -128.49493
Iteration 10:  log pseudolikelihood = -128.49478
Iteration 11:  log pseudolikelihood = -128.49472
Iteration 12:  log pseudolikelihood =  -128.4947
Iteration 13:  log pseudolikelihood =  -128.4947
Iteration 14:  log pseudolikelihood = -128.49469
Iteration 15:  log pseudolikelihood = -128.49469
Iteration 16:  log pseudolikelihood = -128.49469
Iteration 17:  log pseudolikelihood = -128.49469
Iteration 18:  log pseudolikelihood = -128.49469
Iteration 19:  log pseudolikelihood = -128.49469
Iteration 20:  log pseudolikelihood = -128.49469
Iteration 21:  log pseudolikelihood = -128.49469
Iteration 22:  log pseudolikelihood = -128.49469
Iteration 23:  log pseudolikelihood = -128.49469
Iteration 24:  log pseudolikelihood = -128.49469
Iteration 25:  log pseudolikelihood = -128.49469
Iteration 26:  log pseudolikelihood = -128.49469
Iteration 27:  log pseudolikelihood = -128.49469
Iteration 28:  log pseudolikelihood = -128.49469
Iteration 29:  log pseudolikelihood = -128.49469
Iteration 30:  log pseudolikelihood = -128.49469
Iteration 31:  log pseudolikelihood = -128.49469
Iteration 32:  log pseudolikelihood = -128.49469
Iteration 33:  log pseudolikelihood = -128.49469
Iteration 34:  log pseudolikelihood = -128.49469
Refining estimates:
Iteration 0:   log pseudolikelihood = -128.49469
Iteration 1:   log pseudolikelihood = -128.49469

Stratified Cox regr. -- Breslow method for ties

No. of subjects      =          990             Number of obs    =       1,389
No. of failures      =           58
Time at risk         =       624573
                                                Wald chi2(18)    =     8670.66
Log pseudolikelihood =   -128.49469             Prob > chi2      =      0.0000

                           (Std. Err. adjusted for 496 clusters in patient_id)
------------------------------------------------------------------------------
             |               Robust
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        udca |   1.639281   .8382939     0.97   0.334     .6016821    4.466219
      age_tv |   1.006379    .008133     0.79   0.431     .9905645    1.022446
        male |   1.082497    .387454     0.22   0.825     .5367347    2.183202
any_high_r~n |          1  (omitted)
             |
     eth_bin |
  Non-White  |   1.189067   .6343103     0.32   0.745     .4179565    3.382841
             |
         imd |
          2  |   8.998013   9.603591     2.06   0.040     1.110857     72.8845
          3  |   9.864338   10.27545     2.20   0.028     1.280534    75.98797
          4  |   8.841951   9.559116     2.02   0.044     1.062444    73.58512
          5  |   8.196995    8.94756     1.93   0.054     .9649662    69.63014
          6  |   3.63e-15   3.97e-15   -30.39   0.000     4.25e-16    3.10e-14
             |
     bmi_cat |
Underweight  |    .377978   .3754187    -0.98   0.327     .0539546    2.647918
 Overweight  |   .1544885   .1649718    -1.75   0.080     .0190517    1.252733
      Obese  |   1.597527    .659263     1.14   0.256     .7115028    3.586903
Morbidly ..  |   .5136875   .5104862    -0.67   0.503     .0732491    3.602432
             |
     smoking |
Current s..  |   3.167112    3.19826     1.14   0.254     .4376131    22.92115
  Ex-smoker  |   3.098284   3.267667     1.07   0.284     .3920888    24.48263
             |
severe_dis~e |   .3778024    .147803    -2.49   0.013     .1754929    .8133357
covid_vacc~t |   1.325359   .6425634     0.58   0.561     .5124506    3.427795
 liver_trans |   8.90e-16   8.52e-16   -36.20   0.000     1.36e-16    5.81e-15
------------------------------------------------------------------------------
                                                             Stratified by stp

     number |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      1,870       65.16       65.16
          1 |      1,000       34.84      100.00
------------+-----------------------------------
      Total |      2,870      100.00

unexposed_e |
        ver |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      1,000      100.00      100.00
------------+-----------------------------------
      Total |      1,000      100.00
  0
  53
no udca events = 53
(1870 missing values generated)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
total_foll~p |        897      564967           0     564967     564967
18832.233
281.43237

exposed_eve |
          r |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        897       89.70       89.70
          1 |        103       10.30      100.00
------------+-----------------------------------
      Total |      1,000      100.00
udca events = .

Contains data from ./output/an_dataset_composite_any.dta
  obs:         2,870                          
 vars:            17                          22 Aug 2023 12:37
-------------------------------------------------------------------------------
              storage   display    value
variable name   type    format     label      variable label
-------------------------------------------------------------------------------
stp             str4    %9s                   
imd             byte    %8.0g                 
ethnicity       byte    %8.0g      eth5       
patient_id      int     %8.0g                 
male            float   %9.0g                 
eth_bin         float   %9.0g      eth2       
bmi_cat         float   %14.0g     bmi        
smoking         float   %14.0g     smok       
any_high_risk~n float   %9.0g                 
start           float   %9.0g                 
stop            float   %9.0g                 
composite_any~g float   %9.0g                 
age_tv          float   %9.0g                 
udca            float   %9.0g                 
liver_trans     float   %9.0g                 
covid_vacc_fi~t float   %9.0g                 
severe_disease  float   %9.0g                 
-------------------------------------------------------------------------------
Sorted by: 

                id:  patient_id
     failure event:  composite_any_flag != 0 & composite_any_flag < .
obs. time interval:  (stop[_n-1], stop]
 enter on or after:  time index_date
 exit on or before:  failure
    t for analysis:  (time-origin)
            origin:  time index_date

------------------------------------------------------------------------------
      2,870  total observations
          0  exclusions
------------------------------------------------------------------------------
      2,870  observations remaining, representing
      1,000  subjects
        213  failures in single-failure-per-subject data
    630,402  total analysis time at risk and under observation
                                                at risk from t =         0
                                     earliest observed entry t =         0
                                          last observed exit t =     1,035
  213

         failure _d:  composite_any_flag
   analysis time _t:  (stop-origin)
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id
(note: file ./output/graphs/km_composite_any.svg not found)
(file ./output/graphs/km_composite_any.svg written in SVG format)

         failure _d:  composite_any_flag
   analysis time _t:  (stop-origin)
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log pseudolikelihood = -517.07597
Iteration 1:   log pseudolikelihood = -517.07095
Iteration 2:   log pseudolikelihood = -517.07095
Refining estimates:
Iteration 0:   log pseudolikelihood = -517.07095

Stratified Cox regr. -- Breslow method for ties

No. of subjects      =        1,000             Number of obs    =       1,407
No. of failures      =          213
Time at risk         =       630402
                                                Wald chi2(1)     =        0.01
Log pseudolikelihood =   -517.07095             Prob > chi2      =      0.9220

                           (Std. Err. adjusted for 500 clusters in patient_id)
------------------------------------------------------------------------------
             |               Robust
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        udca |   .9658616   .3424469    -0.10   0.922     .4820818    1.935125
------------------------------------------------------------------------------
                                                             Stratified by stp
(note: file ./output/tempdata/crude_composite_any.ster not found)
file ./output/tempdata/crude_composite_any.ster saved
(note: file ./output/tempdata/surv_crude_composite_any.dta not found)
file ./output/tempdata/surv_crude_composite_any.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      udca        |     -0.07714         0.68        1         0.4101
      ------------+---------------------------------------------------
      global test |                      0.68        1         0.4101
      ----------------------------------------------------------------

note: robust variance-covariance matrix used.

         failure _d:  composite_any_flag
   analysis time _t:  (stop-origin)
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log pseudolikelihood = -515.73019
Iteration 1:   log pseudolikelihood =  -515.1278
Iteration 2:   log pseudolikelihood = -515.12775
Refining estimates:
Iteration 0:   log pseudolikelihood = -515.12775

Stratified Cox regr. -- Breslow method for ties

No. of subjects      =          990             Number of obs    =       1,389
No. of failures      =          210
Time at risk         =       624573
                                                Wald chi2(3)     =        1.32
Log pseudolikelihood =   -515.12775             Prob > chi2      =      0.7240

                           (Std. Err. adjusted for 496 clusters in patient_id)
------------------------------------------------------------------------------
             |               Robust
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        udca |   .9337635   .3373063    -0.19   0.850     .4599967    1.895479
      age_tv |   .9962969   .0041848    -0.88   0.377     .9881285    1.004533
        male |   1.125766   .2166077     0.62   0.538     .7720918    1.641448
------------------------------------------------------------------------------
                                                             Stratified by stp
(note: file ./output/tempdata/p_adj_model_composite_any.ster not found)
file ./output/tempdata/p_adj_model_composite_any.ster saved
(note: file ./output/tempdata/p_surv_adj_composite_any.dta not found)
file ./output/tempdata/p_surv_adj_composite_any.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      udca        |     -0.07637         0.71        1         0.3978
      age_tv      |     -0.00294         0.00        1         0.9723
      male        |      0.01527         0.03        1         0.8693
      ------------+---------------------------------------------------
      global test |                      0.72        3         0.8676
      ----------------------------------------------------------------

note: robust variance-covariance matrix used.

         failure _d:  composite_any_flag
   analysis time _t:  (stop-origin)
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

note: any_high_risk_condition omitted because of collinearity
Iteration 0:   log pseudolikelihood = -515.73019
Iteration 1:   log pseudolikelihood = -497.57328
Iteration 2:   log pseudolikelihood = -496.69909
Iteration 3:   log pseudolikelihood = -496.59111
Iteration 4:   log pseudolikelihood =  -496.5531
Iteration 5:   log pseudolikelihood = -496.53914
Iteration 6:   log pseudolikelihood = -496.53401
Iteration 7:   log pseudolikelihood = -496.53212
Iteration 8:   log pseudolikelihood = -496.53143
Iteration 9:   log pseudolikelihood = -496.53117
Iteration 10:  log pseudolikelihood = -496.53108
Iteration 11:  log pseudolikelihood = -496.53104
Iteration 12:  log pseudolikelihood = -496.53103
Iteration 13:  log pseudolikelihood = -496.53102
Iteration 14:  log pseudolikelihood = -496.53102
Iteration 15:  log pseudolikelihood = -496.53102
Iteration 16:  log pseudolikelihood = -496.53102
Iteration 17:  log pseudolikelihood = -496.53102
Iteration 18:  log pseudolikelihood = -496.53102
Iteration 19:  log pseudolikelihood = -496.53102
Iteration 20:  log pseudolikelihood = -496.53102
Iteration 21:  log pseudolikelihood = -496.53102
Iteration 22:  log pseudolikelihood = -496.53102
Iteration 23:  log pseudolikelihood = -496.53102
Iteration 24:  log pseudolikelihood = -496.53102
Iteration 25:  log pseudolikelihood = -496.53102
Iteration 26:  log pseudolikelihood = -496.53102
Iteration 27:  log pseudolikelihood = -496.53102
Iteration 28:  log pseudolikelihood = -496.53102
Iteration 29:  log pseudolikelihood = -496.53102
Iteration 30:  log pseudolikelihood = -496.53102
Iteration 31:  log pseudolikelihood = -496.53102
Iteration 32:  log pseudolikelihood = -496.53102
Iteration 33:  log pseudolikelihood = -496.53102
Iteration 34:  log pseudolikelihood = -496.53102
Iteration 35:  log pseudolikelihood = -496.53102
Iteration 36:  log pseudolikelihood = -496.53102
Iteration 37:  log pseudolikelihood = -496.53102
Iteration 38:  log pseudolikelihood = -496.53102
Iteration 39:  log pseudolikelihood = -496.53102
Iteration 40:  log pseudolikelihood = -496.53102
Iteration 41:  log pseudolikelihood = -496.53102
Iteration 42:  log pseudolikelihood = -496.53102
Iteration 43:  log pseudolikelihood = -496.53102
Iteration 44:  log pseudolikelihood = -496.53102
Refining estimates:
Iteration 0:   log pseudolikelihood = -496.53102

Stratified Cox regr. -- Breslow method for ties

No. of subjects      =          990             Number of obs    =       1,389
No. of failures      =          210
Time at risk         =       624573
                                                Wald chi2(21)    =       36.04
Log pseudolikelihood =   -496.53102             Prob > chi2      =      0.0216

                           (Std. Err. adjusted for 496 clusters in patient_id)
------------------------------------------------------------------------------
             |               Robust
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        udca |   .9207453    .338918    -0.22   0.823     .4475277    1.894345
      age_tv |   .9962975   .0041074    -0.90   0.368     .9882795    1.004381
        male |   1.188868   .2420624     0.85   0.396      .797669    1.771922
any_high_r~n |          1  (omitted)
             |
   ethnicity |
      Mixed  |    1.03454   .3277581     0.11   0.915     .5559984    1.924956
      Asian  |   .9333528    .302235    -0.21   0.831     .4947807    1.760674
      Black  |   .9864774   .3206739    -0.04   0.967     .5216597    1.865464
      Other  |   1.009843   .3117424     0.03   0.975     .5514229    1.849367
    Unknown  |   1.034852   .4543124     0.08   0.938      .437714    2.446616
             |
         imd |
          2  |   2.553664   .8680001     2.76   0.006     1.311708    4.971534
          3  |   2.877401   1.016073     2.99   0.003       1.4402    5.748814
          4  |   2.051046   .7414925     1.99   0.047     1.009833    4.165826
          5  |   1.556065   .5894386     1.17   0.243     .7406143    3.269366
          6  |    1.41052   .8780159     0.55   0.581     .4164147    4.777849
             |
     bmi_cat |
Underweight  |   .8469354   .3641153    -0.39   0.699     .3646707    1.966979
 Overweight  |   1.142675    .296075     0.51   0.607     .6876545    1.898781
      Obese  |    1.20356   .2900812     0.77   0.442     .7504323    1.930295
Morbidly ..  |   .4420366   .2648718    -1.36   0.173     .1365877    1.430556
             |
     smoking |
Current s..  |   2.892791   1.375753     2.23   0.026     1.138945     7.34736
  Ex-smoker  |   1.293754   .7233153     0.46   0.645     .4324739    3.870291
             |
severe_dis~e |   .6041553    .119655    -2.54   0.011     .4097937     .890701
covid_vacc~t |   1.106474   .3179056     0.35   0.725     .6300555    1.943137
 liver_trans |   8.57e-20          .        .       .            .           .
------------------------------------------------------------------------------
                                                             Stratified by stp
(note: file ./output/tempdata/adj_model_composite_any.ster not found)
file ./output/tempdata/adj_model_composite_any.ster saved
(note: file ./output/tempdata/surv_adj_composite_any.dta not found)
file ./output/tempdata/surv_adj_composite_any.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      udca        |     -0.08449         1.08        1         0.2984
      age_tv      |      0.00726         0.01        1         0.9297
      male        |      0.03551         0.21        1         0.6438
      o.any_high~n|            .            .        1             .
      1b.ethnicity|            .            .        1             .
      2.ethnicity |     -0.12566         2.25        1         0.1339
      3.ethnicity |      0.02352         0.08        1         0.7794
      4.ethnicity |      0.02310         0.07        1         0.7952
      5.ethnicity |     -0.01919         0.05        1         0.8262
      6.ethnicity |      0.09544         1.44        1         0.2297
      1b.imd      |            .            .        1             .
      2.imd       |     -0.08411         1.02        1         0.3137
      3.imd       |     -0.04018         0.25        1         0.6155
      4.imd       |     -0.07436         0.87        1         0.3506
      5.imd       |     -0.06440         0.61        1         0.4338
      6.imd       |     -0.10278         1.82        1         0.1779
      1.bmi_cat   |     -0.04861         0.38        1         0.5383
      2b.bmi_cat  |            .            .        1             .
      3.bmi_cat   |      0.11518         1.87        1         0.1715
      4.bmi_cat   |      0.08642         1.02        1         0.3121
      5.bmi_cat   |      0.09994         1.45        1         0.2286
      0b.smoking  |            .            .        1             .
      1.smoking   |     -0.01656         0.05        1         0.8246
      2.smoking   |     -0.02229         0.07        1         0.7849
      severe_dis~e|     -0.02271         0.07        1         0.7899
      covid_vacc~t|      0.05318         0.29        1         0.5874
      liver_trans |            .            .        1             .
      ------------+---------------------------------------------------
      global test |                     14.05       21         0.8675
      ----------------------------------------------------------------

note: robust variance-covariance matrix used.
(note: file ./output/graphs/schoenplot_composite_any.svg not found)
(file ./output/graphs/schoenplot_composite_any.svg written in SVG format)

         failure _d:  composite_any_flag
   analysis time _t:  (stop-origin)
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

note: any_high_risk_condition omitted because of collinearity
Iteration 0:   log pseudolikelihood = -515.73019
Iteration 1:   log pseudolikelihood = -497.64009
Iteration 2:   log pseudolikelihood = -496.76497
Iteration 3:   log pseudolikelihood = -496.65639
Iteration 4:   log pseudolikelihood = -496.61819
Iteration 5:   log pseudolikelihood = -496.60416
Iteration 6:   log pseudolikelihood =   -496.599
Iteration 7:   log pseudolikelihood =  -496.5971
Iteration 8:   log pseudolikelihood =  -496.5964
Iteration 9:   log pseudolikelihood = -496.59615
Iteration 10:  log pseudolikelihood = -496.59605
Iteration 11:  log pseudolikelihood = -496.59602
Iteration 12:  log pseudolikelihood = -496.59601
Iteration 13:  log pseudolikelihood =   -496.596
Iteration 14:  log pseudolikelihood =   -496.596
Iteration 15:  log pseudolikelihood =   -496.596
Iteration 16:  log pseudolikelihood =   -496.596
Iteration 17:  log pseudolikelihood =   -496.596
Iteration 18:  log pseudolikelihood =   -496.596
Iteration 19:  log pseudolikelihood =   -496.596
Iteration 20:  log pseudolikelihood =   -496.596
Iteration 21:  log pseudolikelihood =   -496.596
Iteration 22:  log pseudolikelihood =   -496.596
Iteration 23:  log pseudolikelihood =   -496.596
Iteration 24:  log pseudolikelihood =   -496.596
Iteration 25:  log pseudolikelihood =   -496.596
Iteration 26:  log pseudolikelihood =   -496.596
Iteration 27:  log pseudolikelihood =   -496.596
Iteration 28:  log pseudolikelihood =   -496.596
Iteration 29:  log pseudolikelihood =   -496.596
Iteration 30:  log pseudolikelihood =   -496.596
Iteration 31:  log pseudolikelihood =   -496.596
Iteration 32:  log pseudolikelihood =   -496.596
Iteration 33:  log pseudolikelihood =   -496.596
Iteration 34:  log pseudolikelihood =   -496.596
Iteration 35:  log pseudolikelihood =   -496.596
Iteration 36:  log pseudolikelihood =   -496.596
Iteration 37:  log pseudolikelihood =   -496.596
Iteration 38:  log pseudolikelihood =   -496.596
Iteration 39:  log pseudolikelihood =   -496.596
Iteration 40:  log pseudolikelihood =   -496.596
Refining estimates:
Iteration 0:   log pseudolikelihood =   -496.596
Iteration 1:   log pseudolikelihood =   -496.596
Iteration 2:   log pseudolikelihood =   -496.596

Stratified Cox regr. -- Breslow method for ties

No. of subjects      =          990             Number of obs    =       1,389
No. of failures      =          210
Time at risk         =       624573
                                                Wald chi2(18)    =     3578.84
Log pseudolikelihood =     -496.596             Prob > chi2      =      0.0000

                           (Std. Err. adjusted for 496 clusters in patient_id)
------------------------------------------------------------------------------
             |               Robust
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        udca |   .9165743   .3321333    -0.24   0.810     .4505293    1.864714
      age_tv |   .9961822   .0039886    -0.96   0.339     .9883953     1.00403
        male |   1.189776   .2378752     0.87   0.385     .8040479    1.760549
any_high_r~n |          1  (omitted)
             |
     eth_bin |
  Non-White  |   .9956399   .2465415    -0.02   0.986     .6128114    1.617625
             |
         imd |
          2  |   2.567162   .8689726     2.79   0.005     1.322286    4.984035
          3  |    2.89105   1.008035     3.04   0.002       1.4597    5.725954
          4  |   2.053137   .7320259     2.02   0.044     1.020775    4.129576
          5  |   1.562915   .5897631     1.18   0.237     .7459949    3.274422
          6  |   1.432497   .8777029     0.59   0.557     .4310778    4.760275
             |
     bmi_cat |
Underweight  |   .8470167   .3616897    -0.39   0.697     .3667882    1.955999
 Overweight  |    1.13938   .2942982     0.51   0.613      .686762    1.890302
      Obese  |   1.204753   .2902842     0.77   0.439     .7512794    1.931943
Morbidly ..  |   .4412429   .2626748    -1.37   0.169     .1373889     1.41711
             |
     smoking |
Current s..  |   2.874212   1.346403     2.25   0.024     1.147572     7.19876
  Ex-smoker  |   1.284926   .7161476     0.45   0.653     .4309875    3.830817
             |
severe_dis~e |   .6019909   .1184111    -2.58   0.010     .4094108    .8851575
covid_vacc~t |   1.109459   .3202435     0.36   0.719     .6301056    1.953481
 liver_trans |   6.47e-19   4.68e-19   -57.88   0.000     1.57e-19    2.67e-18
------------------------------------------------------------------------------
                                                             Stratified by stp

     number |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      1,870       65.16       65.16
          1 |      1,000       34.84      100.00
------------+-----------------------------------
      Total |      2,870      100.00

unexposed_e |
        ver |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      1,000      100.00      100.00
------------+-----------------------------------
      Total |      1,000      100.00
  0
  192
no udca events = 192
(1870 missing values generated)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
total_foll~p |        897      564967           0     564967     564967
18832.233
1019.5286

exposed_eve |
          r |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        897       89.70       89.70
          1 |        103       10.30      100.00
------------+-----------------------------------
      Total |      1,000      100.00
udca events = 21

. 
. * sensitivity analysis - 90 day exposure 
. file write tablecontent _n ("90 day exposure sensitivity analysis") _n 

. file write tablecontent ("Outcome") _tab ("Exposure status") _tab ("denominat
> or") _tab ("events") _tab ("total_person_wks") _tab ("Rate") _tab ("unadj_hr"
> ) _tab ///
> ("unadj_ci") _tab ("unadj_lci") _tab ("unadj_uci")  _tab ("p_adj_hr") _tab ("
> p_adj_ci") _tab ("p_adj_lci") _tab ("p_adj_uci") _tab ("f_adj_hr") _tab ("f_a
> dj_ci") _tab ("f_adj_lci") _tab ("f_adj_uci") _tab  _n

. 
. * Cox models and Schoenfeld residual plots for each outcome
. foreach outcome in died_covid_any hosp_any composite_any {
  2.     use ./output/an_dataset_90_`outcome', clear 
  3.     * Open file to write results
.     describe
  4.     gen index_date = date("01/03/2020", "DMY")
  5.     stset stop, fail(`outcome'_flag) id(patient_id) enter(index_date) orig
> in(index_date)
  6.     count if `outcome'_flag==1
  7.     if r(N) > 10 {
  8.         sts graph, by(udca) title("`outcome'") graphregion(fcolor(white)) 
> ylabel(.75(.1)1)
  9.         graph export ./output/graphs/km_`outcome'.svg, as(svg) replace
 10.         * Cox model - crude
.         stcox udca, strata(stp) vce(robust)
 11.         estimates save "./output/tempdata/crude_`outcome'", replace 
 12.         eststo model4
 13.         parmest, label eform format(estimate p lb ub) saving("./output/tem
> pdata/surv_crude_`outcome'", replace) idstr("crude_`outcome'") 
 14.         estat phtest, detail
 15.         * Plot schoenfeld residuals 
.         estat phtest, plot(udca) ///
>                     graphregion(fcolor(white)) ///
>                     ylabel(, nogrid labsize(small)) ///
>                     xlabel(, labsize(small)) ///
>                     xtitle("Time", size(small)) ///
>                     ytitle("Scaled Schoenfeld Residuals", size(small)) ///
>                     msize(small) ///
>                     mcolor(gs6) ///
>                     msymbol(circle_hollow) ///
>                     scheme(s1mono) ///
>                     title ("`outcome'", position(11) size(medsmall)) ///
>                     name(uni_plot_90_`outcome') ///
>                     note("")
 16.         * Cox model - age and sex adjusted
.         stcox udca age_tv male, strata(stp) vce(robust)
 17.         estimates save "./output/tempdata/p_adj_model_`outcome'", replace 
 18.         eststo model5
 19.         parmest, label eform format(estimate p lb ub) saving("./output/tem
> pdata/p_surv_adj_90_`outcome'", replace) idstr("adj_`outcome'") 
 20.         estat phtest, detail
 21.         * Cox model - fully adjusted
.         stcox udca age_tv male any_high_risk_condition i.ethnicity i.imd ib2.
> bmi_cat i.smoking severe_disease covid_vacc_first liver_trans, strata(stp) vc
> e(robust)
 22.         estimates save "./output/tempdata/adj_model_90_`outcome'", replace
>  
 23.         eststo model6
 24.         parmest, label eform format(estimate p lb ub) saving("./output/tem
> pdata/surv_adj_90_`outcome'", replace) idstr("adj_`outcome'") 
 25.         estat phtest, detail
 26.         * Plot Schoenfeld residuals 
.         estat phtest, plot(udca) ///
>                     graphregion(fcolor(white)) ///
>                     ylabel(, nogrid labsize(small)) ///
>                     xlabel(, labsize(small)) ///
>                     xtitle("Time", size(small)) ///
>                     ytitle("Scaled Schoenfeld Residuals", size(small)) ///
>                     msize(small) ///
>                     mcolor(gs6) ///
>                     msymbol(circle_hollow) ///
>                     scheme(s1mono) ///
>                     title ("Adjusted `outcome'", position(11) size(medsmall))
>  ///
>                     name(adj_plot_90_`outcome') ///
>                     note("")
 27.         graph combine uni_plot_90_`outcome' adj_plot_`outcome'
 28.         graph export ./output/graphs/schoenplot_90_`outcome'.svg, as(svg) 
> replace 
 29.         * Cox model - fully adjusted with binary ethnicity variable 
.         stcox udca age_tv male any_high_risk_condition i.eth_bin i.imd ib2.bm
> i_cat i.smoking severe_disease covid_vacc_first liver_trans, strata(stp) vce(
> robust)
 30.         * flag single row for each person
.         bys patient_id (start): gen number = _n==_N 
 31.         tab number 
 32.         * Count number unexposed at any time 
.         bys patient_id : egen unexposed_ever = min(udca) 
 33.         tab unexposed_ever if number==1
 34.         safecount if unexposed_ever==1 & number==1
 35.         local denominator = r(N)
 36.         safecount if udca == 0 & `outcome'_flag == 1
 37.         local event = r(N)
 38.         di "no udca events = " `event'
 39.         bysort udca: egen total_follow_up = total(_t) if number==1
 40.         su total_follow_up if udca==0 & number==1
 41.         local person_mth = r(mean)/30
 42.         di `person_mth'
 43.         local rate = 100000*(`event'/`person_mth')
 44.         di `rate'
 45.         if `event'>10 & `event'!=. {
 46.             file write tablecontent  ("`outcome'") _tab ("No UDCA") _tab (
> `denominator') _tab (`event') _tab %10.0f (`person_mth') _tab %3.2f (`rate') 
> _tab
 47.             file write tablecontent ("1.00") _tab _tab ("1.00")  _n
 48.             }
 49.         else {
 50.             file write tablecontent ("`outcome'") _tab ("No UDCA") _tab ("
> redact") _n
 51.             continue
 52.         }
 53.         * Count number exposed at any time 
.         bys patient_id : egen exposed_ever = max(udca) 
 54.         tab exposed_ever if number==1
 55.         qui safecount if exposed_ever==1 & number==1
 56.         local denominator = r(N)
 57.         qui safecount if udca == 1 & `outcome'_flag == 1
 58.         local event = r(N)
 59.         di "udca events = " `event'
 60.         qui su total_follow_up if udca==1 & number==1
 61.         local person_mth = r(mean)/30
 62.         local rate = 100000*(`event'/`person_mth')
 63.         if `event'>10 & `event'!=. {
 64.             file write tablecontent ("`outcome'") _tab ("UDCA") _tab (`den
> ominator') _tab (`event') _tab %10.0f (`person_mth') _tab %3.2f (`rate') _tab
 65.             cap estimates use "./output/tempdata/crude_`outcome'" 
 66.             cap lincom udca, eform
 67.             file write tablecontent  %4.2f (r(estimate)) _tab ("(") %4.2f 
> (r(lb)) (" - ") %4.2f (r(ub)) (")") _tab %4.2f (r(lb)) _tab %4.2f (r(ub)) _ta
> b 
 68.             cap estimates clear
 69.             cap estimates use "./output/tempdata/p_adj_model_`outcome'" 
 70.             cap lincom udca, eform
 71.             file write tablecontent  %4.2f (r(estimate)) _tab ("(") %4.2f 
> (r(lb)) (" - ") %4.2f (r(ub)) (")") _tab %4.2f (r(lb)) _tab %4.2f (r(ub)) _ta
> b 
 72.             cap estimates clear
 73.             cap estimates use "./output/tempdata/adj_model_`outcome'" 
 74.             cap lincom udca, eform
 75.             file write tablecontent  %4.2f (r(estimate)) _tab ("(") %4.2f 
> (r(lb)) (" - ") %4.2f (r(ub)) (")") _tab %4.2f (r(lb)) _tab %4.2f (r(ub)) _ta
> b _n 
 76.             cap estimates clear
 77.         }
 78.         else {
 79.             file write tablecontent  ("`outcome'") _tab ("UDCA") _tab ("re
> dact") _n
 80.             continue
 81.         }
 82.     
. drop total_follow_up
 83.     }
 84. else { 
 85.     file write tablecontent ("`outcome'") _tab ("redact") _n
 86.     continue
 87. }
 88. }

Contains data from ./output/an_dataset_90_died_covid_any.dta
  obs:         2,946                          
 vars:            17                          22 Aug 2023 12:38
-------------------------------------------------------------------------------
              storage   display    value
variable name   type    format     label      variable label
-------------------------------------------------------------------------------
stp             str4    %9s                   
imd             byte    %8.0g                 
ethnicity       byte    %8.0g      eth5       
patient_id      int     %8.0g                 
male            float   %9.0g                 
eth_bin         float   %9.0g      eth2       
bmi_cat         float   %14.0g     bmi        
smoking         float   %14.0g     smok       
any_high_risk~n float   %9.0g                 
start           float   %9.0g                 
stop            float   %9.0g                 
died_covid_an~g byte    %8.0g                 
age_tv          float   %9.0g                 
udca            float   %9.0g                 
liver_trans     float   %9.0g                 
covid_vacc_fi~t float   %9.0g                 
severe_disease  float   %9.0g                 
-------------------------------------------------------------------------------
Sorted by: 

                id:  patient_id
     failure event:  died_covid_any_flag != 0 & died_covid_any_flag < .
obs. time interval:  (stop[_n-1], stop]
 enter on or after:  time index_date
 exit on or before:  failure
    t for analysis:  (time-origin)
            origin:  time index_date

------------------------------------------------------------------------------
      2,946  total observations
          0  exclusions
------------------------------------------------------------------------------
      2,946  observations remaining, representing
      1,000  subjects
        153  failures in single-failure-per-subject data
    651,528  total analysis time at risk and under observation
                                                at risk from t =         0
                                     earliest observed entry t =         0
                                          last observed exit t =     1,035
  153

         failure _d:  died_covid_any_flag
   analysis time _t:  (stop-origin)
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id
(file ./output/graphs/km_died_covid_any.svg written in SVG format)

         failure _d:  died_covid_any_flag
   analysis time _t:  (stop-origin)
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log pseudolikelihood = -361.07731
Iteration 1:   log pseudolikelihood = -360.49144
Iteration 2:   log pseudolikelihood = -360.47191
Iteration 3:   log pseudolikelihood = -360.47187
Refining estimates:
Iteration 0:   log pseudolikelihood = -360.47187

Stratified Cox regr. -- no ties

No. of subjects      =        1,000             Number of obs    =       1,446
No. of failures      =          153
Time at risk         =       651528
                                                Wald chi2(1)     =        1.01
Log pseudolikelihood =   -360.47187             Prob > chi2      =      0.3138

                           (Std. Err. adjusted for 500 clusters in patient_id)
------------------------------------------------------------------------------
             |               Robust
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        udca |   .5926041   .3078428    -1.01   0.314     .2140854    1.640372
------------------------------------------------------------------------------
                                                             Stratified by stp
file ./output/tempdata/crude_died_covid_any.ster saved
file ./output/tempdata/surv_crude_died_covid_any.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      udca        |     -0.07993         0.50        1         0.4803
      ------------+---------------------------------------------------
      global test |                      0.50        1         0.4803
      ----------------------------------------------------------------

note: robust variance-covariance matrix used.

         failure _d:  died_covid_any_flag
   analysis time _t:  (stop-origin)
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log pseudolikelihood = -360.18634
Iteration 1:   log pseudolikelihood = -357.81299
Iteration 2:   log pseudolikelihood =  -357.7883
Iteration 3:   log pseudolikelihood = -357.78825
Refining estimates:
Iteration 0:   log pseudolikelihood = -357.78825

Stratified Cox regr. -- no ties

No. of subjects      =          990             Number of obs    =       1,428
No. of failures      =          150
Time at risk         =       645699
                                                Wald chi2(3)     =        4.81
Log pseudolikelihood =   -357.78825             Prob > chi2      =      0.1865

                           (Std. Err. adjusted for 496 clusters in patient_id)
------------------------------------------------------------------------------
             |               Robust
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        udca |   .5468036   .2932763    -1.13   0.260     .1911139    1.564482
      age_tv |   .9937111   .0049572    -1.26   0.206     .9840425    1.003475
        male |   1.388781   .3225009     1.41   0.157     .8809857    2.189267
------------------------------------------------------------------------------
                                                             Stratified by stp
file ./output/tempdata/p_adj_model_died_covid_any.ster saved
(note: file ./output/tempdata/p_surv_adj_90_died_covid_any.dta not found)
file ./output/tempdata/p_surv_adj_90_died_covid_any.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      udca        |     -0.07347         0.47        1         0.4914
      age_tv      |     -0.03624         0.12        1         0.7281
      male        |     -0.03869         0.13        1         0.7211
      ------------+---------------------------------------------------
      global test |                      0.76        3         0.8589
      ----------------------------------------------------------------

note: robust variance-covariance matrix used.

         failure _d:  died_covid_any_flag
   analysis time _t:  (stop-origin)
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

note: any_high_risk_condition omitted because of collinearity
Iteration 0:   log pseudolikelihood = -360.18634
Iteration 1:   log pseudolikelihood = -345.85906
Iteration 2:   log pseudolikelihood = -345.04059
Iteration 3:   log pseudolikelihood = -344.97376
Iteration 4:   log pseudolikelihood = -344.95222
Iteration 5:   log pseudolikelihood = -344.94431
Iteration 6:   log pseudolikelihood =  -344.9414
Iteration 7:   log pseudolikelihood = -344.94033
Iteration 8:   log pseudolikelihood = -344.93993
Iteration 9:   log pseudolikelihood = -344.93979
Iteration 10:  log pseudolikelihood = -344.93974
Iteration 11:  log pseudolikelihood = -344.93972
Iteration 12:  log pseudolikelihood = -344.93971
Iteration 13:  log pseudolikelihood = -344.93971
Iteration 14:  log pseudolikelihood =  -344.9397
Iteration 15:  log pseudolikelihood =  -344.9397
Iteration 16:  log pseudolikelihood =  -344.9397
Iteration 17:  log pseudolikelihood =  -344.9397
Iteration 18:  log pseudolikelihood =  -344.9397
Iteration 19:  log pseudolikelihood =  -344.9397
Iteration 20:  log pseudolikelihood =  -344.9397
Iteration 21:  log pseudolikelihood =  -344.9397
Iteration 22:  log pseudolikelihood =  -344.9397
Iteration 23:  log pseudolikelihood =  -344.9397
Iteration 24:  log pseudolikelihood =  -344.9397
Iteration 25:  log pseudolikelihood =  -344.9397
Iteration 26:  log pseudolikelihood =  -344.9397
Iteration 27:  log pseudolikelihood =  -344.9397
Iteration 28:  log pseudolikelihood =  -344.9397
Iteration 29:  log pseudolikelihood =  -344.9397
Iteration 30:  log pseudolikelihood =  -344.9397
Refining estimates:
Iteration 0:   log pseudolikelihood =  -344.9397
Iteration 1:   log pseudolikelihood =  -344.9397

Stratified Cox regr. -- no ties

No. of subjects      =          990             Number of obs    =       1,428
No. of failures      =          150
Time at risk         =       645699
                                                Wald chi2(22)    =     2394.77
Log pseudolikelihood =    -344.9397             Prob > chi2      =      0.0000

                           (Std. Err. adjusted for 496 clusters in patient_id)
------------------------------------------------------------------------------
             |               Robust
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        udca |   .5570536   .3006849    -1.08   0.278     .1933916    1.604561
      age_tv |   .9936457   .0050879    -1.24   0.213     .9837234    1.003668
        male |   1.513806   .3742027     1.68   0.093     .9325216    2.457432
any_high_r~n |          1  (omitted)
             |
   ethnicity |
      Mixed  |   .9601576   .3756018    -0.10   0.917     .4460289    2.066912
      Asian  |   .9861726   .3891296    -0.04   0.972     .4550728      2.1371
      Black  |   1.007816      .4113     0.02   0.985     .4528949     2.24267
      Other  |   .8725619   .3463365    -0.34   0.731     .4008096    1.899566
    Unknown  |   1.410919   .6613258     0.73   0.463     .5630241    3.535714
             |
         imd |
          2  |   1.561672   .5687628     1.22   0.221     .7648589    3.188588
          3  |   1.956848   .7507089     1.75   0.080     .9225907    4.150543
          4  |   1.145407   .4475939     0.35   0.728     .5325172    2.463691
          5  |   .8876388   .3727992    -0.28   0.777      .389709    2.021772
          6  |   1.028408   .7256111     0.04   0.968     .2579795    4.099638
             |
     bmi_cat |
Underweight  |   1.274979   .6195551     0.50   0.617     .4918986    3.304688
 Overweight  |   1.700119   .5159461     1.75   0.080     .9379067    3.081761
      Obese  |   1.217692   .3745013     0.64   0.522     .6664239    2.224972
Morbidly ..  |    .482346   .3790887    -0.93   0.354     .1033657     2.25082
             |
     smoking |
Current s..  |   2.475796   1.326633     1.69   0.091     .8661763    7.076582
  Ex-smoker  |   .6733958    .473404    -0.56   0.574     .1697724    2.670999
             |
severe_dis~e |   .7438356   .1763925    -1.25   0.212     .4673302    1.183941
covid_vacc~t |   1.093621   .3785767     0.26   0.796     .5548914    2.155389
 liver_trans |   3.97e-14   2.70e-14   -45.39   0.000     1.05e-14    1.50e-13
------------------------------------------------------------------------------
                                                             Stratified by stp
(note: file ./output/tempdata/adj_model_90_died_covid_any.ster not found)
file ./output/tempdata/adj_model_90_died_covid_any.ster saved
(note: file ./output/tempdata/surv_adj_90_died_covid_any.dta not found)
file ./output/tempdata/surv_adj_90_died_covid_any.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      udca        |     -0.05266         0.34        1         0.5594
      age_tv      |      0.01039         0.01        1         0.9081
      male        |     -0.06719         0.76        1         0.3819
      o.any_high~n|            .            .        1             .
      1b.ethnicity|            .            .        1             .
      2.ethnicity |     -0.12373         2.32        1         0.1279
      3.ethnicity |     -0.05186         0.43        1         0.5111
      4.ethnicity |     -0.07195         0.59        1         0.4441
      5.ethnicity |     -0.13362         2.24        1         0.1347
      6.ethnicity |      0.06590         0.57        1         0.4498
      1b.imd      |            .            .        1             .
      2.imd       |     -0.19160         3.72        1         0.0537
      3.imd       |     -0.10847         1.46        1         0.2269
      4.imd       |     -0.06305         0.50        1         0.4811
      5.imd       |      0.00285         0.00        1         0.9766
      6.imd       |     -0.14786         3.02        1         0.0823
      1.bmi_cat   |     -0.10840         1.35        1         0.2444
      2b.bmi_cat  |            .            .        1             .
      3.bmi_cat   |      0.08776         0.95        1         0.3299
      4.bmi_cat   |      0.03357         0.14        1         0.7100
      5.bmi_cat   |      0.07032         0.81        1         0.3692
      0b.smoking  |            .            .        1             .
      1.smoking   |     -0.04358         0.28        1         0.5960
      2.smoking   |      0.02071         0.05        1         0.8174
      severe_dis~e|      0.02330         0.06        1         0.8019
      covid_vacc~t|      0.03770         0.12        1         0.7287
      liver_trans |      0.00038         0.00        1         0.9989
      ------------+---------------------------------------------------
      global test |                     16.25       22         0.8034
      ----------------------------------------------------------------

note: robust variance-covariance matrix used.
(note: file ./output/graphs/schoenplot_90_died_covid_any.svg not found)
(file ./output/graphs/schoenplot_90_died_covid_any.svg written in SVG format)

         failure _d:  died_covid_any_flag
   analysis time _t:  (stop-origin)
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

note: any_high_risk_condition omitted because of collinearity
Iteration 0:   log pseudolikelihood = -360.18634
Iteration 1:   log pseudolikelihood = -346.29288
Iteration 2:   log pseudolikelihood = -345.54063
Iteration 3:   log pseudolikelihood =  -345.4725
Iteration 4:   log pseudolikelihood = -345.45076
Iteration 5:   log pseudolikelihood = -345.44277
Iteration 6:   log pseudolikelihood = -345.43983
Iteration 7:   log pseudolikelihood = -345.43875
Iteration 8:   log pseudolikelihood = -345.43836
Iteration 9:   log pseudolikelihood = -345.43821
Iteration 10:  log pseudolikelihood = -345.43816
Iteration 11:  log pseudolikelihood = -345.43814
Iteration 12:  log pseudolikelihood = -345.43813
Iteration 13:  log pseudolikelihood = -345.43813
Iteration 14:  log pseudolikelihood = -345.43813
Iteration 15:  log pseudolikelihood = -345.43813
Iteration 16:  log pseudolikelihood = -345.43813
Iteration 17:  log pseudolikelihood = -345.43813
Iteration 18:  log pseudolikelihood = -345.43813
Iteration 19:  log pseudolikelihood = -345.43813
Iteration 20:  log pseudolikelihood = -345.43813
Iteration 21:  log pseudolikelihood = -345.43813
Iteration 22:  log pseudolikelihood = -345.43813
Iteration 23:  log pseudolikelihood = -345.43813
Iteration 24:  log pseudolikelihood = -345.43813
Iteration 25:  log pseudolikelihood = -345.43813
Iteration 26:  log pseudolikelihood = -345.43813
Iteration 27:  log pseudolikelihood = -345.43813
Iteration 28:  log pseudolikelihood = -345.43813
Iteration 29:  log pseudolikelihood = -345.43813
Iteration 30:  log pseudolikelihood = -345.43813
Refining estimates:
Iteration 0:   log pseudolikelihood = -345.43813
Iteration 1:   log pseudolikelihood = -345.43813
Iteration 2:   log pseudolikelihood = -345.43813

Stratified Cox regr. -- no ties

No. of subjects      =          990             Number of obs    =       1,428
No. of failures      =          150
Time at risk         =       645699
                                                Wald chi2(18)    =     2524.61
Log pseudolikelihood =   -345.43813             Prob > chi2      =      0.0000

                           (Std. Err. adjusted for 496 clusters in patient_id)
------------------------------------------------------------------------------
             |               Robust
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        udca |   .5435847   .2913994    -1.14   0.255     .1900919    1.554429
      age_tv |   .9933686   .0048522    -1.36   0.173     .9839038    1.002924
        male |   1.496595   .3672233     1.64   0.100      .925215    2.420838
any_high_r~n |          1  (omitted)
             |
     eth_bin |
  Non-White  |   .9918501    .311199    -0.03   0.979     .5362612    1.834491
             |
         imd |
          2  |   1.567955   .5781882     1.22   0.223      .761115    3.230106
          3  |   1.997219   .7591064     1.82   0.069     .9481988    4.206799
          4  |   1.160101   .4505348     0.38   0.702     .5419065    2.483516
          5  |   .8959741   .3802886    -0.26   0.796     .3899511    2.058641
          6  |    1.05361   .7357773     0.07   0.940     .2680727     4.14102
             |
     bmi_cat |
Underweight  |   1.269721   .6050405     0.50   0.616     .4989974    3.230861
 Overweight  |   1.723217   .5236238     1.79   0.073     .9499275    3.126005
      Obese  |   1.224375   .3781233     0.66   0.512     .6684027    2.242801
Morbidly ..  |   .4663456   .3608731    -0.99   0.324     .1023342    2.125175
             |
     smoking |
Current s..  |   2.541316   1.356587     1.75   0.081     .8926398    7.235041
  Ex-smoker  |   .6892154   .4892455    -0.52   0.600      .171444    2.770688
             |
severe_dis~e |   .7582816   .1798753    -1.17   0.243     .4763359    1.207113
covid_vacc~t |   1.077186    .372805     0.21   0.830     .5466346    2.122679
 liver_trans |   1.37e-14   9.23e-15   -47.36   0.000     3.65e-15    5.13e-14
------------------------------------------------------------------------------
                                                             Stratified by stp

     number |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      1,946       66.06       66.06
          1 |      1,000       33.94      100.00
------------+-----------------------------------
      Total |      2,946      100.00

unexposed_e |
        ver |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      1,000      100.00      100.00
------------+-----------------------------------
      Total |      1,000      100.00
  0
  139
no udca events = 139
(1946 missing values generated)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
total_foll~p |        897      584131           0     584131     584131
19471.033
713.88096

exposed_eve |
          r |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        897       89.70       89.70
          1 |        103       10.30      100.00
------------+-----------------------------------
      Total |      1,000      100.00
udca events = 14

Contains data from ./output/an_dataset_90_hosp_any.dta
  obs:         2,870                          
 vars:            18                          22 Aug 2023 12:38
-------------------------------------------------------------------------------
              storage   display    value
variable name   type    format     label      variable label
-------------------------------------------------------------------------------
stp             str4    %9s                   
imd             byte    %8.0g                 
ethnicity       byte    %8.0g      eth5       
patient_id      int     %8.0g                 
male            float   %9.0g                 
eth_bin         float   %9.0g      eth2       
bmi_cat         float   %14.0g     bmi        
smoking         float   %14.0g     smok       
any_high_risk~n float   %9.0g                 
start           float   %9.0g                 
stop            float   %9.0g                 
hosp_any_flag   float   %9.0g                 
age_tv          float   %9.0g                 
udca            float   %9.0g                 
liver_trans     float   %9.0g                 
covid_vacc_fi~t float   %9.0g                 
severe_disease  float   %9.0g                 
total_hosp      float   %9.0g                 
-------------------------------------------------------------------------------
Sorted by: 

                id:  patient_id
     failure event:  hosp_any_flag != 0 & hosp_any_flag < .
obs. time interval:  (stop[_n-1], stop]
 enter on or after:  time index_date
 exit on or before:  failure
    t for analysis:  (time-origin)
            origin:  time index_date

------------------------------------------------------------------------------
      2,870  total observations
          0  exclusions
------------------------------------------------------------------------------
      2,870  observations remaining, representing
      1,000  subjects
         58  failures in single-failure-per-subject data
    630,402  total analysis time at risk and under observation
                                                at risk from t =         0
                                     earliest observed entry t =         0
                                          last observed exit t =     1,035
  58

         failure _d:  hosp_any_flag
   analysis time _t:  (stop-origin)
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id
(file ./output/graphs/km_hosp_any.svg written in SVG format)

         failure _d:  hosp_any_flag
   analysis time _t:  (stop-origin)
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log pseudolikelihood = -145.73668
Iteration 1:   log pseudolikelihood = -145.44108
Iteration 2:   log pseudolikelihood = -145.42683
Iteration 3:   log pseudolikelihood = -145.42682
Refining estimates:
Iteration 0:   log pseudolikelihood = -145.42682

Stratified Cox regr. -- Breslow method for ties

No. of subjects      =        1,000             Number of obs    =       1,407
No. of failures      =           58
Time at risk         =       630402
                                                Wald chi2(1)     =        0.67
Log pseudolikelihood =   -145.42682             Prob > chi2      =      0.4119

                           (Std. Err. adjusted for 500 clusters in patient_id)
------------------------------------------------------------------------------
             |               Robust
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        udca |   1.562364   .8495755     0.82   0.412     .5381699    4.535706
------------------------------------------------------------------------------
                                                             Stratified by stp
file ./output/tempdata/crude_hosp_any.ster saved
file ./output/tempdata/surv_crude_hosp_any.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      udca        |     -0.04197         0.06        1         0.8121
      ------------+---------------------------------------------------
      global test |                      0.06        1         0.8121
      ----------------------------------------------------------------

note: robust variance-covariance matrix used.

         failure _d:  hosp_any_flag
   analysis time _t:  (stop-origin)
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log pseudolikelihood = -145.40832
Iteration 1:   log pseudolikelihood =  -145.0496
Iteration 2:   log pseudolikelihood = -145.03693
Iteration 3:   log pseudolikelihood = -145.03692
Refining estimates:
Iteration 0:   log pseudolikelihood = -145.03692

Stratified Cox regr. -- Breslow method for ties

No. of subjects      =          990             Number of obs    =       1,389
No. of failures      =           58
Time at risk         =       624573
                                                Wald chi2(3)     =        0.83
Log pseudolikelihood =   -145.03692             Prob > chi2      =      0.8412

                           (Std. Err. adjusted for 496 clusters in patient_id)
------------------------------------------------------------------------------
             |               Robust
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        udca |   1.514911   .8377779     0.75   0.453     .5124534    4.478367
      age_tv |   1.002619   .0083434     0.31   0.753     .9863987    1.019106
        male |   1.067692    .387478     0.18   0.857     .5242458    2.174488
------------------------------------------------------------------------------
                                                             Stratified by stp
file ./output/tempdata/p_adj_model_hosp_any.ster saved
(note: file ./output/tempdata/p_surv_adj_90_hosp_any.dta not found)
file ./output/tempdata/p_surv_adj_90_hosp_any.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      udca        |     -0.07731         0.21        1         0.6490
      age_tv      |     -0.03667         0.07        1         0.7974
      male        |      0.30204         2.64        1         0.1042
      ------------+---------------------------------------------------
      global test |                      2.78        3         0.4273
      ----------------------------------------------------------------

note: robust variance-covariance matrix used.

         failure _d:  hosp_any_flag
   analysis time _t:  (stop-origin)
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

note: any_high_risk_condition omitted because of collinearity
Iteration 0:   log pseudolikelihood = -145.40832
Iteration 1:   log pseudolikelihood = -130.19678
Iteration 2:   log pseudolikelihood = -128.44623
Iteration 3:   log pseudolikelihood = -128.19537
Iteration 4:   log pseudolikelihood = -128.13446
Iteration 5:   log pseudolikelihood = -128.11246
Iteration 6:   log pseudolikelihood = -128.10437
Iteration 7:   log pseudolikelihood =  -128.1014
Iteration 8:   log pseudolikelihood =  -128.1003
Iteration 9:   log pseudolikelihood =  -128.0999
Iteration 10:  log pseudolikelihood = -128.09975
Iteration 11:  log pseudolikelihood =  -128.0997
Iteration 12:  log pseudolikelihood = -128.09968
Iteration 13:  log pseudolikelihood = -128.09967
Iteration 14:  log pseudolikelihood = -128.09967
Iteration 15:  log pseudolikelihood = -128.09967
Iteration 16:  log pseudolikelihood = -128.09967
Iteration 17:  log pseudolikelihood = -128.09967
Iteration 18:  log pseudolikelihood = -128.09967
Iteration 19:  log pseudolikelihood = -128.09967
Iteration 20:  log pseudolikelihood = -128.09967
Iteration 21:  log pseudolikelihood = -128.09967
Iteration 22:  log pseudolikelihood = -128.09967
Iteration 23:  log pseudolikelihood = -128.09967
Iteration 24:  log pseudolikelihood = -128.09967
Iteration 25:  log pseudolikelihood = -128.09967
Iteration 26:  log pseudolikelihood = -128.09967
Iteration 27:  log pseudolikelihood = -128.09967
Iteration 28:  log pseudolikelihood = -128.09967
Iteration 29:  log pseudolikelihood = -128.09967
Iteration 30:  log pseudolikelihood = -128.09967
Iteration 31:  log pseudolikelihood = -128.09967
Iteration 32:  log pseudolikelihood = -128.09967
Iteration 33:  log pseudolikelihood = -128.09967
Iteration 34:  log pseudolikelihood = -128.09967
Iteration 35:  log pseudolikelihood = -128.09967
Iteration 36:  log pseudolikelihood = -128.09967
Iteration 37:  log pseudolikelihood = -128.09967
Iteration 38:  log pseudolikelihood = -128.09967
Iteration 39:  log pseudolikelihood = -128.09967
Refining estimates:
Iteration 0:   log pseudolikelihood = -128.09967
Iteration 1:   log pseudolikelihood = -128.09967

Stratified Cox regr. -- Breslow method for ties

No. of subjects      =          990             Number of obs    =       1,389
No. of failures      =           58
Time at risk         =       624573
                                                Wald chi2(22)    =    11335.74
Log pseudolikelihood =   -128.09967             Prob > chi2      =      0.0000

                           (Std. Err. adjusted for 496 clusters in patient_id)
------------------------------------------------------------------------------
             |               Robust
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        udca |   1.575104   .8103661     0.88   0.377     .5746185    4.317566
      age_tv |   1.006111   .0081741     0.75   0.453     .9902173    1.022261
        male |   1.042929   .3982855     0.11   0.912     .4933873    2.204556
any_high_r~n |          1  (omitted)
             |
   ethnicity |
      Mixed  |   1.483586   .9061183     0.65   0.518      .448158    4.911277
      Asian  |   1.159393   .7606437     0.23   0.822     .3204665    4.194489
      Black  |   1.284572   .8922451     0.36   0.718     .3292504    5.011765
      Other  |   1.026006   .6497246     0.04   0.968     .2965661    3.549592
    Unknown  |   .7056598    .775223    -0.32   0.751     .0819376    6.077255
             |
         imd |
          2  |    8.66383    9.34336     2.00   0.045     1.046517    71.72553
          3  |   9.776369   10.12303     2.20   0.028     1.284675    74.39814
          4  |    8.78241   9.424168     2.02   0.043     1.072043    71.94741
          5  |   8.110226   8.799694     1.93   0.054     .9670944     68.0138
          6  |   2.31e-17   2.50e-17   -35.25   0.000     2.74e-18    1.94e-16
             |
     bmi_cat |
Underweight  |   .3910875    .397788    -0.92   0.356     .0532708    2.871171
 Overweight  |   .1525805   .1616164    -1.77   0.076     .0191377    1.216492
      Obese  |   1.590132   .6710453     1.10   0.272     .6953777     3.63618
Morbidly ..  |   .4900554   .4949777    -0.71   0.480     .0676852    3.548106
             |
     smoking |
Current s..  |   3.210472   3.280939     1.14   0.254     .4331957    23.79324
  Ex-smoker  |   2.948613   3.105246     1.03   0.305     .3742826    23.22929
             |
severe_dis~e |   .3800302   .1568513    -2.34   0.019     .1692383    .8533707
covid_vacc~t |   1.309458   .6434835     0.55   0.583     .4998051    3.430696
 liver_trans |   6.07e-18   5.70e-18   -42.20   0.000     9.62e-19    3.82e-17
------------------------------------------------------------------------------
                                                             Stratified by stp
(note: file ./output/tempdata/adj_model_90_hosp_any.ster not found)
file ./output/tempdata/adj_model_90_hosp_any.ster saved
(note: file ./output/tempdata/surv_adj_90_hosp_any.dta not found)
file ./output/tempdata/surv_adj_90_hosp_any.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      udca        |     -0.14036         1.13        1         0.2879
      age_tv      |     -0.11359         1.36        1         0.2428
      male        |      0.22881         4.51        1         0.0336
      o.any_high~n|            .            .        1             .
      1b.ethnicity|            .            .        1             .
      2.ethnicity |     -0.20178         2.08        1         0.1495
      3.ethnicity |      0.18650         1.66        1         0.1976
      4.ethnicity |      0.18840         2.50        1         0.1137
      5.ethnicity |      0.20991         1.84        1         0.1750
      6.ethnicity |      0.17478         1.53        1         0.2155
      1b.imd      |            .            .        1             .
      2.imd       |     -0.19755         2.03        1         0.1542
      3.imd       |     -0.30408         4.79        1         0.0286
      4.imd       |     -0.39708        10.44        1         0.0012
      5.imd       |     -0.39002         9.49        1         0.0021
      6.imd       |     -0.31215         4.41        1         0.0357
      1.bmi_cat   |      0.13144         1.56        1         0.2118
      2b.bmi_cat  |            .            .        1             .
      3.bmi_cat   |      0.31876        10.48        1         0.0012
      4.bmi_cat   |      0.32761         8.54        1         0.0035
      5.bmi_cat   |      0.32506         5.22        1         0.0223
      0b.smoking  |            .            .        1             .
      1.smoking   |      0.18452         2.08        1         0.1492
      2.smoking   |      0.06391         0.20        1         0.6524
      severe_dis~e|     -0.09325         0.76        1         0.3840
      covid_vacc~t|      0.19067         1.76        1         0.1842
      liver_trans |     -0.26272         1.68        1         0.1953
      ------------+---------------------------------------------------
      global test |                     36.27       22         0.0284
      ----------------------------------------------------------------

note: robust variance-covariance matrix used.
(note: file ./output/graphs/schoenplot_90_hosp_any.svg not found)
(file ./output/graphs/schoenplot_90_hosp_any.svg written in SVG format)

         failure _d:  hosp_any_flag
   analysis time _t:  (stop-origin)
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

note: any_high_risk_condition omitted because of collinearity
Iteration 0:   log pseudolikelihood = -145.40832
Iteration 1:   log pseudolikelihood = -130.57075
Iteration 2:   log pseudolikelihood = -128.84516
Iteration 3:   log pseudolikelihood = -128.59149
Iteration 4:   log pseudolikelihood = -128.52988
Iteration 5:   log pseudolikelihood = -128.50763
Iteration 6:   log pseudolikelihood = -128.49945
Iteration 7:   log pseudolikelihood = -128.49644
Iteration 8:   log pseudolikelihood = -128.49534
Iteration 9:   log pseudolikelihood = -128.49493
Iteration 10:  log pseudolikelihood = -128.49478
Iteration 11:  log pseudolikelihood = -128.49472
Iteration 12:  log pseudolikelihood =  -128.4947
Iteration 13:  log pseudolikelihood =  -128.4947
Iteration 14:  log pseudolikelihood = -128.49469
Iteration 15:  log pseudolikelihood = -128.49469
Iteration 16:  log pseudolikelihood = -128.49469
Iteration 17:  log pseudolikelihood = -128.49469
Iteration 18:  log pseudolikelihood = -128.49469
Iteration 19:  log pseudolikelihood = -128.49469
Iteration 20:  log pseudolikelihood = -128.49469
Iteration 21:  log pseudolikelihood = -128.49469
Iteration 22:  log pseudolikelihood = -128.49469
Iteration 23:  log pseudolikelihood = -128.49469
Iteration 24:  log pseudolikelihood = -128.49469
Iteration 25:  log pseudolikelihood = -128.49469
Iteration 26:  log pseudolikelihood = -128.49469
Iteration 27:  log pseudolikelihood = -128.49469
Iteration 28:  log pseudolikelihood = -128.49469
Iteration 29:  log pseudolikelihood = -128.49469
Iteration 30:  log pseudolikelihood = -128.49469
Iteration 31:  log pseudolikelihood = -128.49469
Iteration 32:  log pseudolikelihood = -128.49469
Iteration 33:  log pseudolikelihood = -128.49469
Iteration 34:  log pseudolikelihood = -128.49469
Refining estimates:
Iteration 0:   log pseudolikelihood = -128.49469
Iteration 1:   log pseudolikelihood = -128.49469

Stratified Cox regr. -- Breslow method for ties

No. of subjects      =          990             Number of obs    =       1,389
No. of failures      =           58
Time at risk         =       624573
                                                Wald chi2(18)    =     8670.66
Log pseudolikelihood =   -128.49469             Prob > chi2      =      0.0000

                           (Std. Err. adjusted for 496 clusters in patient_id)
------------------------------------------------------------------------------
             |               Robust
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        udca |   1.639281   .8382939     0.97   0.334     .6016821    4.466219
      age_tv |   1.006379    .008133     0.79   0.431     .9905645    1.022446
        male |   1.082497    .387454     0.22   0.825     .5367347    2.183202
any_high_r~n |          1  (omitted)
             |
     eth_bin |
  Non-White  |   1.189067   .6343103     0.32   0.745     .4179565    3.382841
             |
         imd |
          2  |   8.998013   9.603591     2.06   0.040     1.110857     72.8845
          3  |   9.864338   10.27545     2.20   0.028     1.280534    75.98797
          4  |   8.841951   9.559116     2.02   0.044     1.062444    73.58512
          5  |   8.196995    8.94756     1.93   0.054     .9649662    69.63014
          6  |   3.63e-15   3.97e-15   -30.39   0.000     4.25e-16    3.10e-14
             |
     bmi_cat |
Underweight  |    .377978   .3754187    -0.98   0.327     .0539546    2.647918
 Overweight  |   .1544885   .1649718    -1.75   0.080     .0190517    1.252733
      Obese  |   1.597527    .659263     1.14   0.256     .7115028    3.586903
Morbidly ..  |   .5136875   .5104862    -0.67   0.503     .0732491    3.602432
             |
     smoking |
Current s..  |   3.167112    3.19826     1.14   0.254     .4376131    22.92115
  Ex-smoker  |   3.098284   3.267667     1.07   0.284     .3920888    24.48263
             |
severe_dis~e |   .3778024    .147803    -2.49   0.013     .1754929    .8133357
covid_vacc~t |   1.325359   .6425634     0.58   0.561     .5124506    3.427795
 liver_trans |   8.90e-16   8.52e-16   -36.20   0.000     1.36e-16    5.81e-15
------------------------------------------------------------------------------
                                                             Stratified by stp

     number |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      1,870       65.16       65.16
          1 |      1,000       34.84      100.00
------------+-----------------------------------
      Total |      2,870      100.00

unexposed_e |
        ver |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      1,000      100.00      100.00
------------+-----------------------------------
      Total |      1,000      100.00
  0
  53
no udca events = 53
(1870 missing values generated)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
total_foll~p |        897      564967           0     564967     564967
18832.233
281.43237

exposed_eve |
          r |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        897       89.70       89.70
          1 |        103       10.30      100.00
------------+-----------------------------------
      Total |      1,000      100.00
udca events = .

Contains data from ./output/an_dataset_90_composite_any.dta
  obs:         2,870                          
 vars:            17                          22 Aug 2023 12:38
-------------------------------------------------------------------------------
              storage   display    value
variable name   type    format     label      variable label
-------------------------------------------------------------------------------
stp             str4    %9s                   
imd             byte    %8.0g                 
ethnicity       byte    %8.0g      eth5       
patient_id      int     %8.0g                 
male            float   %9.0g                 
eth_bin         float   %9.0g      eth2       
bmi_cat         float   %14.0g     bmi        
smoking         float   %14.0g     smok       
any_high_risk~n float   %9.0g                 
start           float   %9.0g                 
stop            float   %9.0g                 
composite_any~g float   %9.0g                 
age_tv          float   %9.0g                 
udca            float   %9.0g                 
liver_trans     float   %9.0g                 
covid_vacc_fi~t float   %9.0g                 
severe_disease  float   %9.0g                 
-------------------------------------------------------------------------------
Sorted by: 

                id:  patient_id
     failure event:  composite_any_flag != 0 & composite_any_flag < .
obs. time interval:  (stop[_n-1], stop]
 enter on or after:  time index_date
 exit on or before:  failure
    t for analysis:  (time-origin)
            origin:  time index_date

------------------------------------------------------------------------------
      2,870  total observations
          0  exclusions
------------------------------------------------------------------------------
      2,870  observations remaining, representing
      1,000  subjects
        213  failures in single-failure-per-subject data
    630,402  total analysis time at risk and under observation
                                                at risk from t =         0
                                     earliest observed entry t =         0
                                          last observed exit t =     1,035
  213

         failure _d:  composite_any_flag
   analysis time _t:  (stop-origin)
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id
(file ./output/graphs/km_composite_any.svg written in SVG format)

         failure _d:  composite_any_flag
   analysis time _t:  (stop-origin)
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log pseudolikelihood = -517.07597
Iteration 1:   log pseudolikelihood = -517.07095
Iteration 2:   log pseudolikelihood = -517.07095
Refining estimates:
Iteration 0:   log pseudolikelihood = -517.07095

Stratified Cox regr. -- Breslow method for ties

No. of subjects      =        1,000             Number of obs    =       1,407
No. of failures      =          213
Time at risk         =       630402
                                                Wald chi2(1)     =        0.01
Log pseudolikelihood =   -517.07095             Prob > chi2      =      0.9220

                           (Std. Err. adjusted for 500 clusters in patient_id)
------------------------------------------------------------------------------
             |               Robust
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        udca |   .9658616   .3424469    -0.10   0.922     .4820818    1.935125
------------------------------------------------------------------------------
                                                             Stratified by stp
file ./output/tempdata/crude_composite_any.ster saved
file ./output/tempdata/surv_crude_composite_any.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      udca        |     -0.07714         0.68        1         0.4101
      ------------+---------------------------------------------------
      global test |                      0.68        1         0.4101
      ----------------------------------------------------------------

note: robust variance-covariance matrix used.

         failure _d:  composite_any_flag
   analysis time _t:  (stop-origin)
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log pseudolikelihood = -515.73019
Iteration 1:   log pseudolikelihood =  -515.1278
Iteration 2:   log pseudolikelihood = -515.12775
Refining estimates:
Iteration 0:   log pseudolikelihood = -515.12775

Stratified Cox regr. -- Breslow method for ties

No. of subjects      =          990             Number of obs    =       1,389
No. of failures      =          210
Time at risk         =       624573
                                                Wald chi2(3)     =        1.32
Log pseudolikelihood =   -515.12775             Prob > chi2      =      0.7240

                           (Std. Err. adjusted for 496 clusters in patient_id)
------------------------------------------------------------------------------
             |               Robust
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        udca |   .9337635   .3373063    -0.19   0.850     .4599967    1.895479
      age_tv |   .9962969   .0041848    -0.88   0.377     .9881285    1.004533
        male |   1.125766   .2166077     0.62   0.538     .7720918    1.641448
------------------------------------------------------------------------------
                                                             Stratified by stp
file ./output/tempdata/p_adj_model_composite_any.ster saved
(note: file ./output/tempdata/p_surv_adj_90_composite_any.dta not found)
file ./output/tempdata/p_surv_adj_90_composite_any.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      udca        |     -0.07637         0.71        1         0.3978
      age_tv      |     -0.00294         0.00        1         0.9723
      male        |      0.01527         0.03        1         0.8693
      ------------+---------------------------------------------------
      global test |                      0.72        3         0.8676
      ----------------------------------------------------------------

note: robust variance-covariance matrix used.

         failure _d:  composite_any_flag
   analysis time _t:  (stop-origin)
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

note: any_high_risk_condition omitted because of collinearity
Iteration 0:   log pseudolikelihood = -515.73019
Iteration 1:   log pseudolikelihood = -497.57328
Iteration 2:   log pseudolikelihood = -496.69909
Iteration 3:   log pseudolikelihood = -496.59111
Iteration 4:   log pseudolikelihood =  -496.5531
Iteration 5:   log pseudolikelihood = -496.53914
Iteration 6:   log pseudolikelihood = -496.53401
Iteration 7:   log pseudolikelihood = -496.53212
Iteration 8:   log pseudolikelihood = -496.53143
Iteration 9:   log pseudolikelihood = -496.53117
Iteration 10:  log pseudolikelihood = -496.53108
Iteration 11:  log pseudolikelihood = -496.53104
Iteration 12:  log pseudolikelihood = -496.53103
Iteration 13:  log pseudolikelihood = -496.53102
Iteration 14:  log pseudolikelihood = -496.53102
Iteration 15:  log pseudolikelihood = -496.53102
Iteration 16:  log pseudolikelihood = -496.53102
Iteration 17:  log pseudolikelihood = -496.53102
Iteration 18:  log pseudolikelihood = -496.53102
Iteration 19:  log pseudolikelihood = -496.53102
Iteration 20:  log pseudolikelihood = -496.53102
Iteration 21:  log pseudolikelihood = -496.53102
Iteration 22:  log pseudolikelihood = -496.53102
Iteration 23:  log pseudolikelihood = -496.53102
Iteration 24:  log pseudolikelihood = -496.53102
Iteration 25:  log pseudolikelihood = -496.53102
Iteration 26:  log pseudolikelihood = -496.53102
Iteration 27:  log pseudolikelihood = -496.53102
Iteration 28:  log pseudolikelihood = -496.53102
Iteration 29:  log pseudolikelihood = -496.53102
Iteration 30:  log pseudolikelihood = -496.53102
Iteration 31:  log pseudolikelihood = -496.53102
Iteration 32:  log pseudolikelihood = -496.53102
Iteration 33:  log pseudolikelihood = -496.53102
Iteration 34:  log pseudolikelihood = -496.53102
Iteration 35:  log pseudolikelihood = -496.53102
Iteration 36:  log pseudolikelihood = -496.53102
Iteration 37:  log pseudolikelihood = -496.53102
Iteration 38:  log pseudolikelihood = -496.53102
Iteration 39:  log pseudolikelihood = -496.53102
Iteration 40:  log pseudolikelihood = -496.53102
Iteration 41:  log pseudolikelihood = -496.53102
Iteration 42:  log pseudolikelihood = -496.53102
Iteration 43:  log pseudolikelihood = -496.53102
Iteration 44:  log pseudolikelihood = -496.53102
Refining estimates:
Iteration 0:   log pseudolikelihood = -496.53102

Stratified Cox regr. -- Breslow method for ties

No. of subjects      =          990             Number of obs    =       1,389
No. of failures      =          210
Time at risk         =       624573
                                                Wald chi2(21)    =       36.04
Log pseudolikelihood =   -496.53102             Prob > chi2      =      0.0216

                           (Std. Err. adjusted for 496 clusters in patient_id)
------------------------------------------------------------------------------
             |               Robust
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        udca |   .9207453    .338918    -0.22   0.823     .4475277    1.894345
      age_tv |   .9962975   .0041074    -0.90   0.368     .9882795    1.004381
        male |   1.188868   .2420624     0.85   0.396      .797669    1.771922
any_high_r~n |          1  (omitted)
             |
   ethnicity |
      Mixed  |    1.03454   .3277581     0.11   0.915     .5559984    1.924956
      Asian  |   .9333528    .302235    -0.21   0.831     .4947807    1.760674
      Black  |   .9864774   .3206739    -0.04   0.967     .5216597    1.865464
      Other  |   1.009843   .3117424     0.03   0.975     .5514229    1.849367
    Unknown  |   1.034852   .4543124     0.08   0.938      .437714    2.446616
             |
         imd |
          2  |   2.553664   .8680001     2.76   0.006     1.311708    4.971534
          3  |   2.877401   1.016073     2.99   0.003       1.4402    5.748814
          4  |   2.051046   .7414925     1.99   0.047     1.009833    4.165826
          5  |   1.556065   .5894386     1.17   0.243     .7406143    3.269366
          6  |    1.41052   .8780159     0.55   0.581     .4164147    4.777849
             |
     bmi_cat |
Underweight  |   .8469354   .3641153    -0.39   0.699     .3646707    1.966979
 Overweight  |   1.142675    .296075     0.51   0.607     .6876545    1.898781
      Obese  |    1.20356   .2900812     0.77   0.442     .7504323    1.930295
Morbidly ..  |   .4420366   .2648718    -1.36   0.173     .1365877    1.430556
             |
     smoking |
Current s..  |   2.892791   1.375753     2.23   0.026     1.138945     7.34736
  Ex-smoker  |   1.293754   .7233153     0.46   0.645     .4324739    3.870291
             |
severe_dis~e |   .6041553    .119655    -2.54   0.011     .4097937     .890701
covid_vacc~t |   1.106474   .3179056     0.35   0.725     .6300555    1.943137
 liver_trans |   8.57e-20          .        .       .            .           .
------------------------------------------------------------------------------
                                                             Stratified by stp
(note: file ./output/tempdata/adj_model_90_composite_any.ster not found)
file ./output/tempdata/adj_model_90_composite_any.ster saved
(note: file ./output/tempdata/surv_adj_90_composite_any.dta not found)
file ./output/tempdata/surv_adj_90_composite_any.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      udca        |     -0.08449         1.08        1         0.2984
      age_tv      |      0.00726         0.01        1         0.9297
      male        |      0.03551         0.21        1         0.6438
      o.any_high~n|            .            .        1             .
      1b.ethnicity|            .            .        1             .
      2.ethnicity |     -0.12566         2.25        1         0.1339
      3.ethnicity |      0.02352         0.08        1         0.7794
      4.ethnicity |      0.02310         0.07        1         0.7952
      5.ethnicity |     -0.01919         0.05        1         0.8262
      6.ethnicity |      0.09544         1.44        1         0.2297
      1b.imd      |            .            .        1             .
      2.imd       |     -0.08411         1.02        1         0.3137
      3.imd       |     -0.04018         0.25        1         0.6155
      4.imd       |     -0.07436         0.87        1         0.3506
      5.imd       |     -0.06440         0.61        1         0.4338
      6.imd       |     -0.10278         1.82        1         0.1779
      1.bmi_cat   |     -0.04861         0.38        1         0.5383
      2b.bmi_cat  |            .            .        1             .
      3.bmi_cat   |      0.11518         1.87        1         0.1715
      4.bmi_cat   |      0.08642         1.02        1         0.3121
      5.bmi_cat   |      0.09994         1.45        1         0.2286
      0b.smoking  |            .            .        1             .
      1.smoking   |     -0.01656         0.05        1         0.8246
      2.smoking   |     -0.02229         0.07        1         0.7849
      severe_dis~e|     -0.02271         0.07        1         0.7899
      covid_vacc~t|      0.05318         0.29        1         0.5874
      liver_trans |            .            .        1             .
      ------------+---------------------------------------------------
      global test |                     14.05       21         0.8675
      ----------------------------------------------------------------

note: robust variance-covariance matrix used.
(note: file ./output/graphs/schoenplot_90_composite_any.svg not found)
(file ./output/graphs/schoenplot_90_composite_any.svg written in SVG format)

         failure _d:  composite_any_flag
   analysis time _t:  (stop-origin)
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

note: any_high_risk_condition omitted because of collinearity
Iteration 0:   log pseudolikelihood = -515.73019
Iteration 1:   log pseudolikelihood = -497.64009
Iteration 2:   log pseudolikelihood = -496.76497
Iteration 3:   log pseudolikelihood = -496.65639
Iteration 4:   log pseudolikelihood = -496.61819
Iteration 5:   log pseudolikelihood = -496.60416
Iteration 6:   log pseudolikelihood =   -496.599
Iteration 7:   log pseudolikelihood =  -496.5971
Iteration 8:   log pseudolikelihood =  -496.5964
Iteration 9:   log pseudolikelihood = -496.59615
Iteration 10:  log pseudolikelihood = -496.59605
Iteration 11:  log pseudolikelihood = -496.59602
Iteration 12:  log pseudolikelihood = -496.59601
Iteration 13:  log pseudolikelihood =   -496.596
Iteration 14:  log pseudolikelihood =   -496.596
Iteration 15:  log pseudolikelihood =   -496.596
Iteration 16:  log pseudolikelihood =   -496.596
Iteration 17:  log pseudolikelihood =   -496.596
Iteration 18:  log pseudolikelihood =   -496.596
Iteration 19:  log pseudolikelihood =   -496.596
Iteration 20:  log pseudolikelihood =   -496.596
Iteration 21:  log pseudolikelihood =   -496.596
Iteration 22:  log pseudolikelihood =   -496.596
Iteration 23:  log pseudolikelihood =   -496.596
Iteration 24:  log pseudolikelihood =   -496.596
Iteration 25:  log pseudolikelihood =   -496.596
Iteration 26:  log pseudolikelihood =   -496.596
Iteration 27:  log pseudolikelihood =   -496.596
Iteration 28:  log pseudolikelihood =   -496.596
Iteration 29:  log pseudolikelihood =   -496.596
Iteration 30:  log pseudolikelihood =   -496.596
Iteration 31:  log pseudolikelihood =   -496.596
Iteration 32:  log pseudolikelihood =   -496.596
Iteration 33:  log pseudolikelihood =   -496.596
Iteration 34:  log pseudolikelihood =   -496.596
Iteration 35:  log pseudolikelihood =   -496.596
Iteration 36:  log pseudolikelihood =   -496.596
Iteration 37:  log pseudolikelihood =   -496.596
Iteration 38:  log pseudolikelihood =   -496.596
Iteration 39:  log pseudolikelihood =   -496.596
Iteration 40:  log pseudolikelihood =   -496.596
Refining estimates:
Iteration 0:   log pseudolikelihood =   -496.596
Iteration 1:   log pseudolikelihood =   -496.596
Iteration 2:   log pseudolikelihood =   -496.596

Stratified Cox regr. -- Breslow method for ties

No. of subjects      =          990             Number of obs    =       1,389
No. of failures      =          210
Time at risk         =       624573
                                                Wald chi2(18)    =     3578.84
Log pseudolikelihood =     -496.596             Prob > chi2      =      0.0000

                           (Std. Err. adjusted for 496 clusters in patient_id)
------------------------------------------------------------------------------
             |               Robust
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        udca |   .9165743   .3321333    -0.24   0.810     .4505293    1.864714
      age_tv |   .9961822   .0039886    -0.96   0.339     .9883953     1.00403
        male |   1.189776   .2378752     0.87   0.385     .8040479    1.760549
any_high_r~n |          1  (omitted)
             |
     eth_bin |
  Non-White  |   .9956399   .2465415    -0.02   0.986     .6128114    1.617625
             |
         imd |
          2  |   2.567162   .8689726     2.79   0.005     1.322286    4.984035
          3  |    2.89105   1.008035     3.04   0.002       1.4597    5.725954
          4  |   2.053137   .7320259     2.02   0.044     1.020775    4.129576
          5  |   1.562915   .5897631     1.18   0.237     .7459949    3.274422
          6  |   1.432497   .8777029     0.59   0.557     .4310778    4.760275
             |
     bmi_cat |
Underweight  |   .8470167   .3616897    -0.39   0.697     .3667882    1.955999
 Overweight  |    1.13938   .2942982     0.51   0.613      .686762    1.890302
      Obese  |   1.204753   .2902842     0.77   0.439     .7512794    1.931943
Morbidly ..  |   .4412429   .2626748    -1.37   0.169     .1373889     1.41711
             |
     smoking |
Current s..  |   2.874212   1.346403     2.25   0.024     1.147572     7.19876
  Ex-smoker  |   1.284926   .7161476     0.45   0.653     .4309875    3.830817
             |
severe_dis~e |   .6019909   .1184111    -2.58   0.010     .4094108    .8851575
covid_vacc~t |   1.109459   .3202435     0.36   0.719     .6301056    1.953481
 liver_trans |   6.47e-19   4.68e-19   -57.88   0.000     1.57e-19    2.67e-18
------------------------------------------------------------------------------
                                                             Stratified by stp

     number |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      1,870       65.16       65.16
          1 |      1,000       34.84      100.00
------------+-----------------------------------
      Total |      2,870      100.00

unexposed_e |
        ver |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      1,000      100.00      100.00
------------+-----------------------------------
      Total |      1,000      100.00
  0
  192
no udca events = 192
(1870 missing values generated)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
total_foll~p |        897      564967           0     564967     564967
18832.233
1019.5286

exposed_eve |
          r |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        897       89.70       89.70
          1 |        103       10.30      100.00
------------+-----------------------------------
      Total |      1,000      100.00
udca events = 21

. 
. file close tablecontent

. 
end of do-file

. . file open output using "/tmp/106_analysis_models.do.96iQ.out", write text r
> eplace

. . file write output "success" 

. . file close output

. 
end of do-file


