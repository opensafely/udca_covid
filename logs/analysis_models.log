
. 
. * Open file to write results to 
. file open tablecontent using ./output/tables/cox_models.txt, write text repla
> ce
(note: file ./output/tables/cox_models.txt not found)

. file write tablecontent ("Outcome") _tab ("Exposure status") _tab ("denominat
> or") _tab ("events") _tab ("total_person_wks") _tab ("Rate") _tab ("unadj_hr"
> ) _tab ///
> ("unadj_ci") _tab ("unadj_lci") _tab ("unadj_uci")  _tab ("p_adj_hr") _tab ("
> p_adj_ci") _tab ("p_adj_lci") _tab ("p_adj_uci") _tab ("f_adj_hr") _tab ("f_a
> dj_ci") _tab ("f_adj_lci") _tab ("f_adj_uci") _tab  _n

. 
. * Cox models and Schoenfeld residual plots for each outcome
. foreach outcome in died_covid_any hosp_any composite_any {
  2.     use ./output/an_dataset_`outcome', clear 
  3.     * Open file to write results
.     describe
  4.     gen index_date = date("01/03/2020", "DMY")
  5.     stset stop, fail(`outcome'_flag) id(patient_id) enter(index_date) orig
> in(index_date)
  6.     count if `outcome'_flag==1
  7.     if r(N) > 10 {
  8.         sts graph, by(udca) title("`outcome'") graphregion(fcolor(white)) 
> ylabel(.75(.1)1)
  9.         graph export ./output/graphs/km_`outcome'.svg, as(svg) replace
 10.         * Cox model - crude
.         stcox udca, strata(stp) vce(robust)
 11.         estimates save "./output/tempdata/crude_`outcome'", replace 
 12.         eststo model1
 13.         parmest, label eform format(estimate p lb ub) saving("./output/tem
> pdata/surv_crude_`outcome'", replace) idstr("crude_`outcome'") 
 14.         estat phtest, detail
 15.         * Plot schoenfeld residuals 
.         estat phtest, plot(udca) ///
>                     graphregion(fcolor(white)) ///
>                     ylabel(, nogrid labsize(small)) ///
>                     xlabel(, labsize(small)) ///
>                     xtitle("Time", size(small)) ///
>                     ytitle("Scaled Schoenfeld Residuals", size(small)) ///
>                     msize(small) ///
>                     mcolor(gs6) ///
>                     msymbol(circle_hollow) ///
>                     scheme(s1mono) ///
>                     title ("`outcome'", position(11) size(medsmall)) ///
>                     name(uni_plot_`outcome') ///
>                     note("")
 16.         * Cox model - age and sex adjusted
.         stcox udca age_tv male, strata(stp) vce(robust)
 17.         estimates save "./output/tempdata/p_adj_model_`outcome'", replace 
 18.         eststo model2
 19.         parmest, label eform format(estimate p lb ub) saving("./output/tem
> pdata/p_surv_adj_`outcome'", replace) idstr("adj_`outcome'") 
 20.         estat phtest, detail
 21.         * Cox model - fully adjusted
.         stcox udca age_tv male any_high_risk_condition i.ethnicity i.imd ib2.
> bmi_cat i.smoking severe_disease covid_vacc_first liver_trans, strata(stp) vc
> e(robust)
 22.         estimates save "./output/tempdata/adj_model_`outcome'", replace 
 23.         eststo model3
 24.         parmest, label eform format(estimate p lb ub) saving("./output/tem
> pdata/surv_adj_`outcome'", replace) idstr("adj_`outcome'") 
 25.         estat phtest, detail
 26.         * Plot Schoenfeld residuals 
.         estat phtest, plot(udca) ///
>                     graphregion(fcolor(white)) ///
>                     ylabel(, nogrid labsize(small)) ///
>                     xlabel(, labsize(small)) ///
>                     xtitle("Time", size(small)) ///
>                     ytitle("Scaled Schoenfeld Residuals", size(small)) ///
>                     msize(small) ///
>                     mcolor(gs6) ///
>                     msymbol(circle_hollow) ///
>                     scheme(s1mono) ///
>                     title ("Adjusted `outcome'", position(11) size(medsmall))
>  ///
>                     name(adj_plot_`outcome') ///
>                     note("")
 27.         graph combine uni_plot_`outcome' adj_plot_`outcome'
 28.         graph export ./output/graphs/schoenplot_`outcome'.svg, as(svg) rep
> lace 
 29.         * Cox model - fully adjusted with binary ethnicity variable 
.         stcox udca age_tv male any_high_risk_condition i.eth_bin i.imd ib2.bm
> i_cat i.smoking severe_disease covid_vacc_first liver_trans, strata(stp) vce(
> robust)
 30.         * flag single row for each person
.         bys patient_id (start): gen number = _n==_N 
 31.         tab number 
 32.         * Count number unexposed at any time 
.         bys patient_id : egen unexposed_ever = min(udca) 
 33.         tab unexposed_ever if number==1
 34.         safecount if unexposed_ever==1 & number==1
 35.         local denominator = r(N)
 36.         safecount if udca == 0 & `outcome'_flag == 1
 37.         local event = r(N)
 38.         di "no udca events = " `event'
 39.         bysort udca: egen total_follow_up = total(_t) if number==1
 40.         su total_follow_up if udca==0 & number==1
 41.         local person_mth = r(mean)/30
 42.         di `person_mth'
 43.         local rate = 100000*(`event'/`person_mth')
 44.         di `rate'
 45.         if `event'>10 & `event'!=. {
 46.             file write tablecontent  ("`outcome'") _tab ("No UDCA") _tab (
> `denominator') _tab (`event') _tab %10.0f (`person_mth') _tab %3.2f (`rate') 
> _tab
 47.             file write tablecontent ("1.00") _tab _tab ("1.00")  _n
 48.             }
 49.         else {
 50.             file write tablecontent ("`outcome'") _tab ("No UDCA") _tab ("
> redact") _n
 51.             continue
 52.         }
 53.         * Count number exposed at any time 
.         bys patient_id : egen exposed_ever = max(udca) 
 54.         tab exposed_ever if number==1
 55.         qui safecount if exposed_ever==1 & number==1
 56.         local denominator = r(N)
 57.         qui safecount if udca == 1 & `outcome'_flag == 1
 58.         local event = r(N)
 59.         di "udca events = " `event'
 60.         qui su total_follow_up if udca==1 & number==1
 61.         local person_mth = r(mean)/30
 62.         local rate = 100000*(`event'/`person_mth')
 63.         if `event'>10 & `event'!=. {
 64.             file write tablecontent ("`outcome'") _tab ("UDCA") _tab (`den
> ominator') _tab (`event') _tab %10.0f (`person_mth') _tab %3.2f (`rate') _tab
 65.             cap estimates use "./output/tempdata/crude_`outcome'" 
 66.             cap lincom udca, eform
 67.             file write tablecontent  %4.2f (r(estimate)) _tab ("(") %4.2f 
> (r(lb)) (" - ") %4.2f (r(ub)) (")") _tab %4.2f (r(lb)) _tab %4.2f (r(ub)) _ta
> b 
 68.             cap estimates clear
 69.             cap estimates use "./output/tempdata/p_adj_model_`outcome'" 
 70.             cap lincom udca, eform
 71.             file write tablecontent  %4.2f (r(estimate)) _tab ("(") %4.2f 
> (r(lb)) (" - ") %4.2f (r(ub)) (")") _tab %4.2f (r(lb)) _tab %4.2f (r(ub)) _ta
> b 
 72.             cap estimates clear
 73.             cap estimates use "./output/tempdata/adj_model_`outcome'" 
 74.             cap lincom udca, eform
 75.             file write tablecontent  %4.2f (r(estimate)) _tab ("(") %4.2f 
> (r(lb)) (" - ") %4.2f (r(ub)) (")") _tab %4.2f (r(lb)) _tab %4.2f (r(ub)) _ta
> b _n 
 76.             cap estimates clear
 77.         }
 78.         else {
 79.             file write tablecontent  ("`outcome'") _tab ("UDCA") _tab ("re
> dact") _n
 80.             continue
 81.         }
 82.     
. drop total_follow_up
 83.     }
 84. else { 
 85.     file write tablecontent ("`outcome'") _tab ("redact") _n
 86.     continue
 87. }
 88. }

Contains data from ./output/an_dataset_died_covid_any.dta
  obs:         2,948                          
 vars:            17                          21 Aug 2023 10:48
-------------------------------------------------------------------------------
              storage   display    value
variable name   type    format     label      variable label
-------------------------------------------------------------------------------
stp             str4    %9s                   
imd             byte    %8.0g                 
ethnicity       byte    %8.0g      eth5       
patient_id      int     %8.0g                 
male            float   %9.0g                 
eth_bin         float   %9.0g      eth2       
bmi_cat         float   %14.0g     bmi        
smoking         float   %14.0g     smok       
any_high_risk~n float   %9.0g                 
start           float   %9.0g                 
stop            float   %9.0g                 
died_covid_an~g byte    %8.0g                 
age_tv          float   %9.0g                 
udca            float   %9.0g                 
liver_trans     float   %9.0g                 
covid_vacc_fi~t float   %9.0g                 
severe_disease  float   %9.0g                 
-------------------------------------------------------------------------------
Sorted by: 

                id:  patient_id
     failure event:  died_covid_any_flag != 0 & died_covid_any_flag < .
obs. time interval:  (stop[_n-1], stop]
 enter on or after:  time index_date
 exit on or before:  failure
    t for analysis:  (time-origin)
            origin:  time index_date

------------------------------------------------------------------------------
      2,948  total observations
          0  exclusions
------------------------------------------------------------------------------
      2,948  observations remaining, representing
      1,000  subjects
        165  failures in single-failure-per-subject data
    646,349  total analysis time at risk and under observation
                                                at risk from t =         0
                                     earliest observed entry t =         0
                                          last observed exit t =     1,035
  165

         failure _d:  died_covid_any_flag
   analysis time _t:  (stop-origin)
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id
(note: file ./output/graphs/km_died_covid_any.svg not found)
(file ./output/graphs/km_died_covid_any.svg written in SVG format)

         failure _d:  died_covid_any_flag
   analysis time _t:  (stop-origin)
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log pseudolikelihood = -353.62365
Iteration 1:   log pseudolikelihood = -353.56934
Iteration 2:   log pseudolikelihood = -353.56924
Refining estimates:
Iteration 0:   log pseudolikelihood = -353.56924

Stratified Cox regr. -- Breslow method for ties

No. of subjects      =        1,000             Number of obs    =       1,440
No. of failures      =          165
Time at risk         =       646349
                                                Wald chi2(1)     =        0.12
Log pseudolikelihood =   -353.56924             Prob > chi2      =      0.7321

                           (Std. Err. adjusted for 500 clusters in patient_id)
------------------------------------------------------------------------------
             |               Robust
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        udca |   1.120508   .3723737     0.34   0.732     .5841693    2.149271
------------------------------------------------------------------------------
                                                             Stratified by stp
(note: file ./output/tempdata/crude_died_covid_any.ster not found)
file ./output/tempdata/crude_died_covid_any.ster saved
(note: file ./output/tempdata/surv_crude_died_covid_any.dta not found)
file ./output/tempdata/surv_crude_died_covid_any.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      udca        |      0.02486         0.04        1         0.8351
      ------------+---------------------------------------------------
      global test |                      0.04        1         0.8351
      ----------------------------------------------------------------

note: robust variance-covariance matrix used.

         failure _d:  died_covid_any_flag
   analysis time _t:  (stop-origin)
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log pseudolikelihood = -352.80617
Iteration 1:   log pseudolikelihood = -352.74564
Iteration 2:   log pseudolikelihood = -352.74558
Refining estimates:
Iteration 0:   log pseudolikelihood = -352.74558

Stratified Cox regr. -- Breslow method for ties

No. of subjects      =          985             Number of obs    =       1,426
No. of failures      =          163
Time at risk         =       637856
                                                Wald chi2(3)     =        0.12
Log pseudolikelihood =   -352.74558             Prob > chi2      =      0.9896

                           (Std. Err. adjusted for 495 clusters in patient_id)
------------------------------------------------------------------------------
             |               Robust
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        udca |   1.104672   .3708586     0.30   0.767     .5720965    2.133031
      age_tv |   1.000059   .0054345     0.01   0.991     .9894636    1.010767
        male |   1.044501   .2398358     0.19   0.850     .6659749    1.638173
------------------------------------------------------------------------------
                                                             Stratified by stp
(note: file ./output/tempdata/p_adj_model_died_covid_any.ster not found)
file ./output/tempdata/p_adj_model_died_covid_any.ster saved
(note: file ./output/tempdata/p_surv_adj_died_covid_any.dta not found)
file ./output/tempdata/p_surv_adj_died_covid_any.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      udca        |     -0.00152         0.00        1         0.9882
      age_tv      |     -0.09865         1.15        1         0.2826
      male        |      0.09128         0.65        1         0.4203
      ------------+---------------------------------------------------
      global test |                      1.85        3         0.6049
      ----------------------------------------------------------------

note: robust variance-covariance matrix used.

         failure _d:  died_covid_any_flag
   analysis time _t:  (stop-origin)
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

note: any_high_risk_condition omitted because of collinearity
Iteration 0:   log pseudolikelihood = -352.80617
Iteration 1:   log pseudolikelihood = -341.37421
Iteration 2:   log pseudolikelihood = -337.26229
Iteration 3:   log pseudolikelihood = -337.10285
Iteration 4:   log pseudolikelihood = -337.10215
Refining estimates:
Iteration 0:   log pseudolikelihood = -337.10215

Stratified Cox regr. -- Breslow method for ties

No. of subjects      =          985             Number of obs    =       1,426
No. of failures      =          163
Time at risk         =       637856
                                                Wald chi2(23)    =       28.76
Log pseudolikelihood =   -337.10215             Prob > chi2      =      0.1884

                           (Std. Err. adjusted for 495 clusters in patient_id)
------------------------------------------------------------------------------
             |               Robust
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        udca |   1.524045   .5432028     1.18   0.237     .7578984    3.064676
      age_tv |   1.001358   .0060163     0.23   0.821     .9896351    1.013219
        male |   1.049671   .2529732     0.20   0.841     .6545029    1.683429
any_high_r~n |          1  (omitted)
             |
   ethnicity |
      Mixed  |   2.726904    1.39281     1.96   0.050     1.002086    7.420526
      Asian  |   3.123632   1.535626     2.32   0.021      1.19178     8.18698
      Black  |   2.858887   1.414673     2.12   0.034     1.083911    7.540499
      Other  |    2.43219   1.280554     1.69   0.091      .866638    6.825857
    Unknown  |    1.70618   1.309235     0.70   0.486       .37919    7.677025
             |
         imd |
          2  |    .318017   .1464486    -2.49   0.013     .1289637    .7842117
          3  |   .8568431   .3283885    -0.40   0.687     .4042732    1.816049
          4  |   .8821626   .3404671    -0.32   0.745     .4140291    1.879604
          5  |   1.048967   .3538307     0.14   0.887     .5415522    2.031812
          6  |   .3548794   .4100079    -0.90   0.370      .036868    3.415951
             |
     bmi_cat |
          0  |   .8249258   .2998224    -0.53   0.596     .4046155     1.68185
Underweight  |   .7585707   .3294332    -0.64   0.525     .3238433    1.776876
 Overweight  |   .9315903   .3636564    -0.18   0.856     .4334602    2.002169
      Obese  |   .6743229    .249652    -1.06   0.287     .3263855    1.393173
Morbidly ..  |   3.354054   1.789593     2.27   0.023     1.178696     9.54417
             |
     smoking |
Current s..  |   1.601722   .8017673     0.94   0.347     .6004883    4.272377
  Ex-smoker  |   1.129455   .6548992     0.21   0.834     .3625024     3.51906
             |
severe_dis~e |   .9507937   .2510665    -0.19   0.848     .5666542    1.595345
covid_vacc~t |   1.524766   .5443631     1.18   0.237     .7573768    3.069688
 liver_trans |   1.505774   1.651241     0.37   0.709     .1755203    12.91791
------------------------------------------------------------------------------
                                                             Stratified by stp
(note: file ./output/tempdata/adj_model_died_covid_any.ster not found)
file ./output/tempdata/adj_model_died_covid_any.ster saved
(note: file ./output/tempdata/surv_adj_died_covid_any.dta not found)
file ./output/tempdata/surv_adj_died_covid_any.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      udca        |      0.04141         0.20        1         0.6579
      age_tv      |     -0.11575         3.14        1         0.0766
      male        |      0.08291         1.18        1         0.2779
      o.any_high~n|            .            .        1             .
      1b.ethnicity|            .            .        1             .
      2.ethnicity |     -0.03531         0.19        1         0.6654
      3.ethnicity |     -0.02387         0.06        1         0.8012
      4.ethnicity |      0.05551         0.43        1         0.5097
      5.ethnicity |      0.02529         0.10        1         0.7550
      6.ethnicity |      0.12351         1.30        1         0.2535
      1b.imd      |            .            .        1             .
      2.imd       |     -0.15267         3.16        1         0.0753
      3.imd       |     -0.08422         1.18        1         0.2774
      4.imd       |     -0.03305         0.15        1         0.7008
      5.imd       |      0.06610         0.57        1         0.4511
      6.imd       |     -0.12342         3.25        1         0.0713
      0.bmi_cat   |     -0.10335         1.24        1         0.2646
      1.bmi_cat   |     -0.01712         0.03        1         0.8683
      2b.bmi_cat  |            .            .        1             .
      3.bmi_cat   |     -0.08812         1.14        1         0.2855
      4.bmi_cat   |     -0.13296         2.00        1         0.1570
      5.bmi_cat   |     -0.08288         0.95        1         0.3296
      0b.smoking  |            .            .        1             .
      1.smoking   |      0.00129         0.00        1         0.9849
      2.smoking   |      0.00569         0.01        1         0.9411
      severe_dis~e|      0.02919         0.11        1         0.7359
      covid_vacc~t|     -0.05094         0.41        1         0.5214
      liver_trans |     -0.00025         0.00        1         0.9977
      ------------+---------------------------------------------------
      global test |                     18.91       23         0.7062
      ----------------------------------------------------------------

note: robust variance-covariance matrix used.
(note: file ./output/graphs/schoenplot_died_covid_any.svg not found)
(file ./output/graphs/schoenplot_died_covid_any.svg written in SVG format)

         failure _d:  died_covid_any_flag
   analysis time _t:  (stop-origin)
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

note: any_high_risk_condition omitted because of collinearity
Iteration 0:   log pseudolikelihood = -352.80617
Iteration 1:   log pseudolikelihood = -341.66728
Iteration 2:   log pseudolikelihood = -337.75772
Iteration 3:   log pseudolikelihood = -337.59471
Iteration 4:   log pseudolikelihood = -337.59398
Refining estimates:
Iteration 0:   log pseudolikelihood = -337.59398

Stratified Cox regr. -- Breslow method for ties

No. of subjects      =          985             Number of obs    =       1,426
No. of failures      =          163
Time at risk         =       637856
                                                Wald chi2(19)    =       27.85
Log pseudolikelihood =   -337.59398             Prob > chi2      =      0.0863

                           (Std. Err. adjusted for 495 clusters in patient_id)
------------------------------------------------------------------------------
             |               Robust
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        udca |   1.541059   .5346713     1.25   0.213     .7807182    3.041894
      age_tv |   1.002076   .0058795     0.35   0.724     .9906183    1.013666
        male |   1.037537   .2502364     0.15   0.879     .6467079    1.664558
any_high_r~n |          1  (omitted)
             |
     eth_bin |
  Non-White  |   2.766453   1.247958     2.26   0.024     1.142728    6.697362
             |
         imd |
          2  |   .3183435   .1467986    -2.48   0.013     .1289375    .7859826
          3  |   .8472423    .318519    -0.44   0.659     .4055087    1.770171
          4  |   .8855668   .3328022    -0.32   0.746     .4239688    1.849732
          5  |   1.072667   .3600605     0.21   0.834     .5555762    2.071031
          6  |   .3719383   .4225496    -0.87   0.384     .0401275     3.44746
             |
     bmi_cat |
          0  |   .8260179   .2931011    -0.54   0.590     .4120523    1.655871
Underweight  |   .7531966    .326213    -0.65   0.513     .3222915    1.760223
 Overweight  |   .9114028   .3524481    -0.24   0.810     .4271128    1.944814
      Obese  |   .6561853    .240365    -1.15   0.250     .3200558    1.345325
Morbidly ..  |   3.658907   1.833429     2.59   0.010     1.370332    9.769605
             |
     smoking |
Current s..  |    1.52038   .7372484     0.86   0.388     .5877537    3.932863
  Ex-smoker  |   1.097814    .624227     0.16   0.870     .3601867    3.346029
             |
severe_dis~e |   .9386064   .2457031    -0.24   0.809     .5619022    1.567856
covid_vacc~t |   1.540842   .5532329     1.20   0.229     .7623206    3.114429
 liver_trans |   1.615301   1.706223     0.45   0.650     .2037698    12.80464
------------------------------------------------------------------------------
                                                             Stratified by stp

     number |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      1,948       66.08       66.08
          1 |      1,000       33.92      100.00
------------+-----------------------------------
      Total |      2,948      100.00

unexposed_e |
        ver |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      1,000      100.00      100.00
------------+-----------------------------------
      Total |      1,000      100.00
  0
  149
no udca events = 149
(1948 missing values generated)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
total_foll~p |        890      572726           0     572726     572726
19090.867
780.47792

exposed_eve |
          r |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        890       89.00       89.00
          1 |        110       11.00      100.00
------------+-----------------------------------
      Total |      1,000      100.00
udca events = 16

Contains data from ./output/an_dataset_hosp_any.dta
  obs:         2,886                          
 vars:            18                          21 Aug 2023 10:48
-------------------------------------------------------------------------------
              storage   display    value
variable name   type    format     label      variable label
-------------------------------------------------------------------------------
stp             str4    %9s                   
imd             byte    %8.0g                 
ethnicity       byte    %8.0g      eth5       
patient_id      int     %8.0g                 
male            float   %9.0g                 
eth_bin         float   %9.0g      eth2       
bmi_cat         float   %14.0g     bmi        
smoking         float   %14.0g     smok       
any_high_risk~n float   %9.0g                 
start           float   %9.0g                 
stop            float   %9.0g                 
hosp_any_flag   float   %9.0g                 
age_tv          float   %9.0g                 
udca            float   %9.0g                 
liver_trans     float   %9.0g                 
covid_vacc_fi~t float   %9.0g                 
severe_disease  float   %9.0g                 
total_hosp      float   %9.0g                 
-------------------------------------------------------------------------------
Sorted by: 

                id:  patient_id
     failure event:  hosp_any_flag != 0 & hosp_any_flag < .
obs. time interval:  (stop[_n-1], stop]
 enter on or after:  time index_date
 exit on or before:  failure
    t for analysis:  (time-origin)
            origin:  time index_date

------------------------------------------------------------------------------
      2,886  total observations
          0  exclusions
------------------------------------------------------------------------------
      2,886  observations remaining, representing
      1,000  subjects
         46  failures in single-failure-per-subject data
    626,377  total analysis time at risk and under observation
                                                at risk from t =         0
                                     earliest observed entry t =         0
                                          last observed exit t =     1,035
  46

         failure _d:  hosp_any_flag
   analysis time _t:  (stop-origin)
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id
(note: file ./output/graphs/km_hosp_any.svg not found)
(file ./output/graphs/km_hosp_any.svg written in SVG format)

         failure _d:  hosp_any_flag
   analysis time _t:  (stop-origin)
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log pseudolikelihood = -103.22523
Iteration 1:   log pseudolikelihood = -103.14407
Iteration 2:   log pseudolikelihood = -103.14311
Iteration 3:   log pseudolikelihood = -103.14311
Refining estimates:
Iteration 0:   log pseudolikelihood = -103.14311

Stratified Cox regr. -- no ties

No. of subjects      =        1,000             Number of obs    =       1,407
No. of failures      =           46
Time at risk         =       626377
                                                Wald chi2(1)     =        0.18
Log pseudolikelihood =   -103.14311             Prob > chi2      =      0.6736

                           (Std. Err. adjusted for 500 clusters in patient_id)
------------------------------------------------------------------------------
             |               Robust
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        udca |   1.298476   .8051821     0.42   0.674     .3851289    4.377862
------------------------------------------------------------------------------
                                                             Stratified by stp
(note: file ./output/tempdata/crude_hosp_any.ster not found)
file ./output/tempdata/crude_hosp_any.ster saved
(note: file ./output/tempdata/surv_crude_hosp_any.dta not found)
file ./output/tempdata/surv_crude_hosp_any.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      udca        |      0.10693         0.23        1         0.6294
      ------------+---------------------------------------------------
      global test |                      0.23        1         0.6294
      ----------------------------------------------------------------

note: robust variance-covariance matrix used.

         failure _d:  hosp_any_flag
   analysis time _t:  (stop-origin)
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log pseudolikelihood = -102.98963
Iteration 1:   log pseudolikelihood = -101.71382
Iteration 2:   log pseudolikelihood = -101.71282
Iteration 3:   log pseudolikelihood = -101.71282
Refining estimates:
Iteration 0:   log pseudolikelihood = -101.71282

Stratified Cox regr. -- no ties

No. of subjects      =          985             Number of obs    =       1,393
No. of failures      =           45
Time at risk         =       617986
                                                Wald chi2(3)     =        3.00
Log pseudolikelihood =   -101.71282             Prob > chi2      =      0.3920

                           (Std. Err. adjusted for 495 clusters in patient_id)
------------------------------------------------------------------------------
             |               Robust
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        udca |   1.308819   .8512142     0.41   0.679     .3658347    4.682459
      age_tv |   .9929399   .0090622    -0.78   0.438     .9753361    1.010861
        male |   .5532687   .2574321    -1.27   0.203     .2222685    1.377191
------------------------------------------------------------------------------
                                                             Stratified by stp
(note: file ./output/tempdata/p_adj_model_hosp_any.ster not found)
file ./output/tempdata/p_adj_model_hosp_any.ster saved
(note: file ./output/tempdata/p_surv_adj_hosp_any.dta not found)
file ./output/tempdata/p_surv_adj_hosp_any.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      udca        |      0.03151         0.04        1         0.8414
      age_tv      |     -0.07294         0.15        1         0.7027
      male        |     -0.01855         0.01        1         0.9110
      ------------+---------------------------------------------------
      global test |                      0.31        3         0.9584
      ----------------------------------------------------------------

note: robust variance-covariance matrix used.

         failure _d:  hosp_any_flag
   analysis time _t:  (stop-origin)
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

note: any_high_risk_condition omitted because of collinearity
Iteration 0:   log pseudolikelihood = -102.98963
Iteration 1:   log pseudolikelihood = -90.867875
Iteration 2:   log pseudolikelihood = -89.351051
Iteration 3:   log pseudolikelihood = -89.222207
Iteration 4:   log pseudolikelihood = -89.188724
Iteration 5:   log pseudolikelihood = -89.176507
Iteration 6:   log pseudolikelihood = -89.172018
Iteration 7:   log pseudolikelihood = -89.170367
Iteration 8:   log pseudolikelihood =  -89.16976
Iteration 9:   log pseudolikelihood = -89.169536
Iteration 10:  log pseudolikelihood = -89.169454
Iteration 11:  log pseudolikelihood = -89.169424
Iteration 12:  log pseudolikelihood = -89.169413
Iteration 13:  log pseudolikelihood = -89.169409
Iteration 14:  log pseudolikelihood = -89.169407
Iteration 15:  log pseudolikelihood = -89.169407
Iteration 16:  log pseudolikelihood = -89.169406
Iteration 17:  log pseudolikelihood = -89.169406
Iteration 18:  log pseudolikelihood = -89.169406
Iteration 19:  log pseudolikelihood = -89.169406
Iteration 20:  log pseudolikelihood = -89.169406
Iteration 21:  log pseudolikelihood = -89.169406
Iteration 22:  log pseudolikelihood = -89.169406
Iteration 23:  log pseudolikelihood = -89.169406
Iteration 24:  log pseudolikelihood = -89.169406
Iteration 25:  log pseudolikelihood = -89.169406
Iteration 26:  log pseudolikelihood = -89.169406
Iteration 27:  log pseudolikelihood = -89.169406
Iteration 28:  log pseudolikelihood = -89.169406
Iteration 29:  log pseudolikelihood = -89.169406
Iteration 30:  log pseudolikelihood = -89.169406
Iteration 31:  log pseudolikelihood = -89.169406
Iteration 32:  log pseudolikelihood = -89.169406
Iteration 33:  log pseudolikelihood = -89.169406
Refining estimates:
Iteration 0:   log pseudolikelihood = -89.169406
Iteration 1:   log pseudolikelihood = -89.169406
Iteration 2:   log pseudolikelihood = -89.169406
Iteration 3:   log pseudolikelihood = -89.169406
Iteration 4:   log pseudolikelihood = -89.169406
Iteration 5:   log pseudolikelihood = -89.169406
Iteration 6:   log pseudolikelihood = -89.169406

Stratified Cox regr. -- no ties

No. of subjects      =          985             Number of obs    =       1,393
No. of failures      =           45
Time at risk         =       617986
                                                Wald chi2(23)    =    16373.91
Log pseudolikelihood =   -89.169406             Prob > chi2      =      0.0000

                           (Std. Err. adjusted for 495 clusters in patient_id)
------------------------------------------------------------------------------
             |               Robust
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        udca |    1.33027   .9144817     0.42   0.678     .3457714    5.117883
      age_tv |   .9878207   .0100841    -1.20   0.230     .9682525    1.007784
        male |   .6587797   .3106329    -0.89   0.376     .2614418    1.659989
any_high_r~n |          1  (omitted)
             |
   ethnicity |
      Mixed  |   1.391307   1.165768     0.39   0.693     .2692811    7.188526
      Asian  |   1.303892   1.008932     0.34   0.732     .2861506    5.941394
      Black  |   1.210728   .8634449     0.27   0.789     .2992277    4.898815
      Other  |   .7543309   .5854582    -0.36   0.716     .1647857    3.453061
    Unknown  |   6.47e-18   5.15e-18   -49.73   0.000     1.36e-18    3.08e-17
             |
         imd |
          2  |   1.073384   .8187565     0.09   0.926     .2406995    4.786688
          3  |   2.298298   1.660527     1.15   0.249     .5577127    9.471136
          4  |   1.553301   1.202417     0.57   0.569     .3406721    7.082304
          5  |   .3304063   .3928837    -0.93   0.352     .0321285    3.397862
          6  |   4.678435   4.630137     1.56   0.119      .672491    32.54728
             |
     bmi_cat |
          0  |   .2616262   .3304549    -1.06   0.288     .0220062    3.110405
Underweight  |   .9562905   .9013634    -0.05   0.962     .1507576    6.065971
 Overweight  |   1.928855   1.732617     0.73   0.465     .3316634    11.21764
      Obese  |   3.245677   2.399377     1.59   0.111     .7621699    13.82161
Morbidly ..  |   9.82e-18   8.46e-18   -45.49   0.000     1.82e-18    5.31e-17
             |
     smoking |
Current s..  |   3.442398   3.241543     1.31   0.189      .543657    21.79703
  Ex-smoker  |   6.203171   6.661558     1.70   0.089     .7559833    50.89971
             |
severe_dis~e |   .7906609   .3686278    -0.50   0.614     .3170565    1.971713
covid_vacc~t |   .3411884   .3295288    -1.11   0.266     .0513903    2.265204
 liver_trans |   5.80e-18   4.71e-18   -48.85   0.000     1.18e-18    2.85e-17
------------------------------------------------------------------------------
                                                             Stratified by stp
(note: file ./output/tempdata/adj_model_hosp_any.ster not found)
file ./output/tempdata/adj_model_hosp_any.ster saved
(note: file ./output/tempdata/surv_adj_hosp_any.dta not found)
file ./output/tempdata/surv_adj_hosp_any.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      udca        |     -0.15073         1.85        1         0.1741
      age_tv      |     -0.09306         0.36        1         0.5480
      male        |     -0.09186         0.82        1         0.3638
      o.any_high~n|            .            .        1             .
      1b.ethnicity|            .            .        1             .
      2.ethnicity |     -0.09653         0.77        1         0.3807
      3.ethnicity |      0.03051         0.05        1         0.8240
      4.ethnicity |      0.18829         3.17        1         0.0751
      5.ethnicity |      0.09378         0.53        1         0.4650
      6.ethnicity |      0.07745         0.30        1         0.5838
      1b.imd      |            .            .        1             .
      2.imd       |      0.22857         2.03        1         0.1547
      3.imd       |      0.20195         2.16        1         0.1420
      4.imd       |      0.07906         0.23        1         0.6288
      5.imd       |      0.02171         0.02        1         0.8803
      6.imd       |      0.13687         1.12        1         0.2907
      0.bmi_cat   |      0.46074        13.72        1         0.0002
      1.bmi_cat   |      0.16030         2.09        1         0.1483
      2b.bmi_cat  |            .            .        1             .
      3.bmi_cat   |      0.26817         6.01        1         0.0142
      4.bmi_cat   |      0.31282         8.65        1         0.0033
      5.bmi_cat   |      0.34258         6.79        1         0.0091
      0b.smoking  |            .            .        1             .
      1.smoking   |     -0.13034         0.61        1         0.4339
      2.smoking   |     -0.12311         0.85        1         0.3559
      severe_dis~e|      0.22062         4.19        1         0.0407
      covid_vacc~t|     -0.05045         0.06        1         0.8073
      liver_trans |     -0.30186         1.51        1         0.2195
      ------------+---------------------------------------------------
      global test |                     22.89       23         0.4674
      ----------------------------------------------------------------

note: robust variance-covariance matrix used.
(note: file ./output/graphs/schoenplot_hosp_any.svg not found)
(file ./output/graphs/schoenplot_hosp_any.svg written in SVG format)

         failure _d:  hosp_any_flag
   analysis time _t:  (stop-origin)
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

note: any_high_risk_condition omitted because of collinearity
Iteration 0:   log pseudolikelihood = -102.98963
Iteration 1:   log pseudolikelihood = -92.004482
Iteration 2:   log pseudolikelihood = -90.678695
Iteration 3:   log pseudolikelihood = -90.595249
Iteration 4:   log pseudolikelihood = -90.578783
Iteration 5:   log pseudolikelihood =   -90.5728
Iteration 6:   log pseudolikelihood =   -90.5706
Iteration 7:   log pseudolikelihood = -90.569791
Iteration 8:   log pseudolikelihood = -90.569493
Iteration 9:   log pseudolikelihood = -90.569383
Iteration 10:  log pseudolikelihood = -90.569343
Iteration 11:  log pseudolikelihood = -90.569328
Iteration 12:  log pseudolikelihood = -90.569323
Iteration 13:  log pseudolikelihood = -90.569321
Iteration 14:  log pseudolikelihood =  -90.56932
Iteration 15:  log pseudolikelihood =  -90.56932
Iteration 16:  log pseudolikelihood =  -90.56932
Iteration 17:  log pseudolikelihood =  -90.56932
Iteration 18:  log pseudolikelihood =  -90.56932
Iteration 19:  log pseudolikelihood =  -90.56932
Iteration 20:  log pseudolikelihood =  -90.56932
Iteration 21:  log pseudolikelihood =  -90.56932
Iteration 22:  log pseudolikelihood =  -90.56932
Iteration 23:  log pseudolikelihood =  -90.56932
Iteration 24:  log pseudolikelihood =  -90.56932
Iteration 25:  log pseudolikelihood =  -90.56932
Iteration 26:  log pseudolikelihood =  -90.56932
Iteration 27:  log pseudolikelihood =  -90.56932
Iteration 28:  log pseudolikelihood =  -90.56932
Iteration 29:  log pseudolikelihood =  -90.56932
Iteration 30:  log pseudolikelihood =  -90.56932
Iteration 31:  log pseudolikelihood =  -90.56932
Refining estimates:
Iteration 0:   log pseudolikelihood =  -90.56932
Iteration 1:   log pseudolikelihood =  -90.56932
Iteration 2:   log pseudolikelihood =  -90.56932

Stratified Cox regr. -- no ties

No. of subjects      =          985             Number of obs    =       1,393
No. of failures      =           45
Time at risk         =       617986
                                                Wald chi2(19)    =     8951.44
Log pseudolikelihood =    -90.56932             Prob > chi2      =      0.0000

                           (Std. Err. adjusted for 495 clusters in patient_id)
------------------------------------------------------------------------------
             |               Robust
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        udca |   1.346385   .8972131     0.45   0.655     .3647036    4.970484
      age_tv |   .9893498   .0095322    -1.11   0.266     .9708423     1.00821
        male |    .662526   .3106603    -0.88   0.380     .2642847    1.660863
any_high_r~n |          1  (omitted)
             |
     eth_bin |
  Non-White  |   1.077389   .6666864     0.12   0.904     .3203693    3.623218
             |
         imd |
          2  |    1.16371   .8835103     0.20   0.842     .2627828    5.153388
          3  |   2.147852   1.610227     1.02   0.308     .4941577    9.335618
          4  |   1.642471   1.307275     0.62   0.533     .3451512    7.816023
          5  |   .3384765   .3970956    -0.92   0.356     .0339556    3.374003
          6  |   4.899497   4.795749     1.62   0.104     .7194063    33.36788
             |
     bmi_cat |
          0  |   .2806301    .328228    -1.09   0.277     .0283504     2.77785
Underweight  |   1.081935   .9680118     0.09   0.930     .1873388    6.248485
 Overweight  |   1.840916   1.555807     0.72   0.470     .3512859    9.647328
      Obese  |   3.312727   2.369282     1.67   0.094     .8154572    13.45768
Morbidly ..  |   4.70e-15   3.51e-15   -44.21   0.000     1.09e-15    2.03e-14
             |
     smoking |
Current s..  |   3.066967   2.898343     1.19   0.236     .4811797    19.54838
  Ex-smoker  |   6.188397   6.567029     1.72   0.086     .7732082    49.52903
             |
severe_dis~e |   .7707793   .3662267    -0.55   0.584     .3037328    1.955998
covid_vacc~t |   .3853671   .3770813    -0.97   0.330     .0566207    2.622856
 liver_trans |   2.70e-15   2.13e-15   -42.61   0.000     5.78e-16    1.27e-14
------------------------------------------------------------------------------
                                                             Stratified by stp

     number |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      1,886       65.35       65.35
          1 |      1,000       34.65      100.00
------------+-----------------------------------
      Total |      2,886      100.00

unexposed_e |
        ver |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      1,000      100.00      100.00
------------+-----------------------------------
      Total |      1,000      100.00
  0
  40
no udca events = 40
(1886 missing values generated)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
total_foll~p |        890      555852           0     555852     555852
18528.4
215.8848

exposed_eve |
          r |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        890       89.00       89.00
          1 |        110       11.00      100.00
------------+-----------------------------------
      Total |      1,000      100.00
udca events = 6

Contains data from ./output/an_dataset_composite_any.dta
  obs:         2,886                          
 vars:            17                          21 Aug 2023 10:48
-------------------------------------------------------------------------------
              storage   display    value
variable name   type    format     label      variable label
-------------------------------------------------------------------------------
stp             str4    %9s                   
imd             byte    %8.0g                 
ethnicity       byte    %8.0g      eth5       
patient_id      int     %8.0g                 
male            float   %9.0g                 
eth_bin         float   %9.0g      eth2       
bmi_cat         float   %14.0g     bmi        
smoking         float   %14.0g     smok       
any_high_risk~n float   %9.0g                 
start           float   %9.0g                 
stop            float   %9.0g                 
composite_any~g float   %9.0g                 
age_tv          float   %9.0g                 
udca            float   %9.0g                 
liver_trans     float   %9.0g                 
covid_vacc_fi~t float   %9.0g                 
severe_disease  float   %9.0g                 
-------------------------------------------------------------------------------
Sorted by: 

                id:  patient_id
     failure event:  composite_any_flag != 0 & composite_any_flag < .
obs. time interval:  (stop[_n-1], stop]
 enter on or after:  time index_date
 exit on or before:  failure
    t for analysis:  (time-origin)
            origin:  time index_date

------------------------------------------------------------------------------
      2,886  total observations
          0  exclusions
------------------------------------------------------------------------------
      2,886  observations remaining, representing
      1,000  subjects
        221  failures in single-failure-per-subject data
    626,377  total analysis time at risk and under observation
                                                at risk from t =         0
                                     earliest observed entry t =         0
                                          last observed exit t =     1,035
  221

         failure _d:  composite_any_flag
   analysis time _t:  (stop-origin)
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id
(note: file ./output/graphs/km_composite_any.svg not found)
(file ./output/graphs/km_composite_any.svg written in SVG format)

         failure _d:  composite_any_flag
   analysis time _t:  (stop-origin)
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log pseudolikelihood = -489.89576
Iteration 1:   log pseudolikelihood = -489.85364
Iteration 2:   log pseudolikelihood = -489.85359
Refining estimates:
Iteration 0:   log pseudolikelihood = -489.85359

Stratified Cox regr. -- Breslow method for ties

No. of subjects      =        1,000             Number of obs    =       1,407
No. of failures      =          221
Time at risk         =       626377
                                                Wald chi2(1)     =        0.09
Log pseudolikelihood =   -489.85359             Prob > chi2      =      0.7627

                           (Std. Err. adjusted for 500 clusters in patient_id)
------------------------------------------------------------------------------
             |               Robust
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        udca |     1.0911   .3150643     0.30   0.763      .619545     1.92157
------------------------------------------------------------------------------
                                                             Stratified by stp
(note: file ./output/tempdata/crude_composite_any.ster not found)
file ./output/tempdata/crude_composite_any.ster saved
(note: file ./output/tempdata/surv_crude_composite_any.dta not found)
file ./output/tempdata/surv_crude_composite_any.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      udca        |      0.04596         0.20        1         0.6518
      ------------+---------------------------------------------------
      global test |                      0.20        1         0.6518
      ----------------------------------------------------------------

note: robust variance-covariance matrix used.

         failure _d:  composite_any_flag
   analysis time _t:  (stop-origin)
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log pseudolikelihood =   -488.764
Iteration 1:   log pseudolikelihood = -488.55584
Iteration 2:   log pseudolikelihood =  -488.5558
Refining estimates:
Iteration 0:   log pseudolikelihood =  -488.5558

Stratified Cox regr. -- Breslow method for ties

No. of subjects      =          985             Number of obs    =       1,393
No. of failures      =          218
Time at risk         =       617986
                                                Wald chi2(3)     =        0.47
Log pseudolikelihood =    -488.5558             Prob > chi2      =      0.9260

                           (Std. Err. adjusted for 495 clusters in patient_id)
------------------------------------------------------------------------------
             |               Robust
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        udca |   1.059556   .3165922     0.19   0.846     .5899118    1.903094
      age_tv |   .9974334   .0046537    -0.55   0.582     .9883539    1.006596
        male |   1.017092   .1996147     0.09   0.931     .6923141    1.494229
------------------------------------------------------------------------------
                                                             Stratified by stp
(note: file ./output/tempdata/p_adj_model_composite_any.ster not found)
file ./output/tempdata/p_adj_model_composite_any.ster saved
(note: file ./output/tempdata/p_surv_adj_composite_any.dta not found)
file ./output/tempdata/p_surv_adj_composite_any.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      udca        |      0.00352         0.00        1         0.9674
      age_tv      |     -0.06521         0.72        1         0.3951
      male        |      0.09971         1.02        1         0.3136
      ------------+---------------------------------------------------
      global test |                      1.85        3         0.6048
      ----------------------------------------------------------------

note: robust variance-covariance matrix used.

         failure _d:  composite_any_flag
   analysis time _t:  (stop-origin)
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

note: any_high_risk_condition omitted because of collinearity
Iteration 0:   log pseudolikelihood =   -488.764
Iteration 1:   log pseudolikelihood = -479.60508
Iteration 2:   log pseudolikelihood = -478.97226
Iteration 3:   log pseudolikelihood = -478.96401
Iteration 4:   log pseudolikelihood = -478.96401
Refining estimates:
Iteration 0:   log pseudolikelihood = -478.96401

Stratified Cox regr. -- Breslow method for ties

No. of subjects      =          985             Number of obs    =       1,393
No. of failures      =          218
Time at risk         =       617986
                                                Wald chi2(23)    =       19.56
Log pseudolikelihood =   -478.96401             Prob > chi2      =      0.6685

                           (Std. Err. adjusted for 495 clusters in patient_id)
------------------------------------------------------------------------------
             |               Robust
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        udca |    1.24457    .397042     0.69   0.493     .6659923    2.325783
      age_tv |   .9983946   .0049052    -0.33   0.744     .9888268    1.008055
        male |   1.092555   .2285946     0.42   0.672     .7250147    1.646416
any_high_r~n |          1  (omitted)
             |
   ethnicity |
      Mixed  |   2.012081   .7958765     1.77   0.077     .9267305     4.36855
      Asian  |   1.957867    .755625     1.74   0.082     .9188992    4.171559
      Black  |   2.290136   .8561177     2.22   0.027     1.100672    4.765017
      Other  |   1.536506   .6208993     1.06   0.288     .6959296     3.39237
    Unknown  |   1.158949   .7297603     0.23   0.815     .3373532    3.981475
             |
         imd |
          2  |   .5161834   .1865649    -1.83   0.067     .2541868    1.048226
          3  |   1.109388   .3380372     0.34   0.733     .6105441     2.01581
          4  |   1.062806   .3492039     0.19   0.853     .5581825    2.023632
          5  |   .9210302   .2877939    -0.26   0.792     .4992284    1.699215
          6  |   .9773472   .6958283    -0.03   0.974       .24212    3.945181
             |
     bmi_cat |
          0  |   .8562285   .2886361    -0.46   0.645       .44223    1.657796
Underweight  |   .8741335   .3309634    -0.36   0.722     .4161949    1.835941
 Overweight  |   1.142624   .3893575     0.39   0.696      .585936    2.228212
      Obese  |   1.278638   .3898961     0.81   0.420     .7033801     2.32437
Morbidly ..  |   2.630856   1.275084     2.00   0.046     1.017535    6.802126
             |
     smoking |
Current s..  |   1.513591   .5606821     1.12   0.263     .7323127    3.128388
  Ex-smoker  |   1.378782   .6194446     0.71   0.475       .57158     3.32594
             |
severe_dis~e |   .9947051   .2149077    -0.02   0.980     .6513147     1.51914
covid_vacc~t |   1.205207   .3859147     0.58   0.560     .6434305    2.257468
 liver_trans |   .9388647   1.053486    -0.06   0.955     .1041076    8.466885
------------------------------------------------------------------------------
                                                             Stratified by stp
(note: file ./output/tempdata/adj_model_composite_any.ster not found)
file ./output/tempdata/adj_model_composite_any.ster saved
(note: file ./output/tempdata/surv_adj_composite_any.dta not found)
file ./output/tempdata/surv_adj_composite_any.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      udca        |      0.01120         0.02        1         0.8772
      age_tv      |     -0.04965         0.59        1         0.4409
      male        |      0.10324         1.99        1         0.1583
      o.any_high~n|            .            .        1             .
      1b.ethnicity|            .            .        1             .
      2.ethnicity |     -0.01248         0.02        1         0.8750
      3.ethnicity |     -0.02755         0.10        1         0.7481
      4.ethnicity |      0.06446         0.71        1         0.3985
      5.ethnicity |      0.02872         0.14        1         0.7120
      6.ethnicity |      0.08461         0.79        1         0.3747
      1b.imd      |            .            .        1             .
      2.imd       |     -0.11016         1.84        1         0.1753
      3.imd       |     -0.02985         0.13        1         0.7140
      4.imd       |     -0.00235         0.00        1         0.9770
      5.imd       |      0.10950         1.75        1         0.1853
      6.imd       |     -0.11129         2.71        1         0.0994
      0.bmi_cat   |     -0.05138         0.48        1         0.4896
      1.bmi_cat   |     -0.00962         0.01        1         0.9067
      2b.bmi_cat  |            .            .        1             .
      3.bmi_cat   |     -0.06247         0.64        1         0.4241
      4.bmi_cat   |     -0.06379         0.73        1         0.3918
      5.bmi_cat   |     -0.00596         0.01        1         0.9404
      0b.smoking  |            .            .        1             .
      1.smoking   |     -0.05432         0.54        1         0.4624
      2.smoking   |     -0.07823         1.05        1         0.3046
      severe_dis~e|      0.06714         0.67        1         0.4123
      covid_vacc~t|     -0.04387         0.34        1         0.5620
      liver_trans |      0.03592         0.25        1         0.6149
      ------------+---------------------------------------------------
      global test |                     18.24       23         0.7442
      ----------------------------------------------------------------

note: robust variance-covariance matrix used.
(note: file ./output/graphs/schoenplot_composite_any.svg not found)
(file ./output/graphs/schoenplot_composite_any.svg written in SVG format)

         failure _d:  composite_any_flag
   analysis time _t:  (stop-origin)
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

note: any_high_risk_condition omitted because of collinearity
Iteration 0:   log pseudolikelihood =   -488.764
Iteration 1:   log pseudolikelihood = -480.89874
Iteration 2:   log pseudolikelihood = -480.29011
Iteration 3:   log pseudolikelihood = -480.28176
Iteration 4:   log pseudolikelihood = -480.28176
Refining estimates:
Iteration 0:   log pseudolikelihood = -480.28176

Stratified Cox regr. -- Breslow method for ties

No. of subjects      =          985             Number of obs    =       1,393
No. of failures      =          218
Time at risk         =       617986
                                                Wald chi2(19)    =       16.48
Log pseudolikelihood =   -480.28176             Prob > chi2      =      0.6250

                           (Std. Err. adjusted for 495 clusters in patient_id)
------------------------------------------------------------------------------
             |               Robust
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        udca |   1.300058   .4047644     0.84   0.399      .706231    2.393198
      age_tv |   .9988857   .0048226    -0.23   0.817     .9894781    1.008383
        male |    1.08172   .2277651     0.37   0.709     .7159581     1.63434
any_high_r~n |          1  (omitted)
             |
     eth_bin |
  Non-White  |   1.923278   .6436754     1.95   0.051     .9980797    3.706116
             |
         imd |
          2  |   .5293225    .190266    -1.77   0.077     .2616703    1.070746
          3  |   1.114384    .341842     0.35   0.724     .6108365    2.033033
          4  |   1.097023   .3553785     0.29   0.775      .581394    2.069955
          5  |   .9340148   .2914555    -0.22   0.827     .5066871    1.721741
          6  |   1.004152   .6957249     0.01   0.995     .2582535    3.904387
             |
     bmi_cat |
          0  |   .8340179   .2721195    -0.56   0.578     .4399966    1.580889
Underweight  |   .8669811   .3267464    -0.38   0.705     .4142001    1.814718
 Overweight  |   1.098437   .3660816     0.28   0.778     .5715982    2.110859
      Obese  |   1.237327   .3722999     0.71   0.479     .6860666    2.231531
Morbidly ..  |   2.701693   1.272581     2.11   0.035     1.073232    6.801086
             |
     smoking |
Current s..  |   1.477746   .5380679     1.07   0.283     .7238778    3.016714
  Ex-smoker  |   1.398496   .6212963     0.75   0.450     .5854719    3.340537
             |
severe_dis~e |   .9902674   .2131349    -0.05   0.964     .6494544    1.509928
covid_vacc~t |   1.241577   .3934097     0.68   0.495     .6672053    2.310404
 liver_trans |   1.065179   1.155554     0.06   0.954     .1270577    8.929847
------------------------------------------------------------------------------
                                                             Stratified by stp

     number |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      1,886       65.35       65.35
          1 |      1,000       34.65      100.00
------------+-----------------------------------
      Total |      2,886      100.00

unexposed_e |
        ver |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      1,000      100.00      100.00
------------+-----------------------------------
      Total |      1,000      100.00
  0
  199
no udca events = 199
(1886 missing values generated)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
total_foll~p |        890      555852           0     555852     555852
18528.4
1074.0269

exposed_eve |
          r |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        890       89.00       89.00
          1 |        110       11.00      100.00
------------+-----------------------------------
      Total |      1,000      100.00
udca events = 22

. 
. file close tablecontent

. 
end of do-file

. . file open output using "/tmp/106_analysis_models.do.UqaF.out", write text r
> eplace

. . file write output "success" 

. . file close output

. 
end of do-file


