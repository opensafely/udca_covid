
. * Open file to write results to 
. file open tablecontent using ./output/tables/cum_incidence.txt, write text re
> place
(note: file ./output/tables/cum_incidence.txt not found)

. file write tablecontent ("Outcome") _tab ("Exposure") _tab ("Cumulative incid
> ence") _tab ("95% confidence interval") _n

. 
. 
. /* plot for each outcome - age and sex adjusted only
> foreach outcome in hosp_any composite_any {
>     use ./output/an_dataset_`outcome', clear 
>     describe
>     gen index_date = date("01/03/2020", "DMY")
>     stset stop, fail(`outcome'_flag) id(patient_id) enter(index_date) origin(
> index_date)
> 
>     * Add cumulative incidence plots 
>     * Not stratifying by stp as cannot use tvc and stratify  
>     
>     * Age and sex adjusted model 
>     * Setting df (degrees of freedom for restricted cubic splines) as 3 as th
> is is default 
>     * Setting dftvc (degrees of freedom for time-dependent effects) as 1 = li
> near effect of log time 
>     stpm2 udca age_tv male, tvc(udca) dftvc(1) df(3) scale(hazard) eform
>     summ _t
>     local tmax=r(max)
>     local tmaxplus1=r(max)+1
> 
>     range days 0 `tmax' `tmaxplus1'
>     stpm2_standsurv if udca == 1, at1(udca 0) at2(udca 1) timevar(days) ci co
> ntrast(difference) fail
> 
>     gen date = d(1/3/2020)+ days
>     format date %tddd_Month
> 
>     for var _at1 _at2 _at1_lci _at1_uci _at2_lci _at2_uci _contrast2_1 _contr
> ast2_1_lci _contrast2_1_uci: replace X=100*X
> 
>     *cumulative mortality at last day of follow-up - write to file 
>     file write tablecontent ("`outcome'") _tab ("No UDCA") _tab  
>     * cumulative outcome - no UDCA 
>     sum _at1 if days==`tmax'
>     file write tablecontent (r(mean)) _tab 
>     sum _at1_lci if days==`tmax'
>     file write tablecontent (r(mean)) _tab 
>     sum _at1_uci if days==`tmax'
>     file write tablecontent (r(mean)) _tab _n 
>     * cumulative outcome - UDCA 
>     file write tablecontent ("`outcome'") _tab ("UDCA") _tab  
>     sum _at2 if days==`tmax'
>     file write tablecontent (r(mean)) _tab 
>     sum _at2_lci if days==`tmax'
>     file write tablecontent (r(mean)) _tab 
>     sum _at2_uci if days==`tmax'
>     file write tablecontent (r(mean)) _tab _n 
>     
>     *l date days _at1 _at1_lci _at1_uci _at2 _at2_lci _at2_uci if days<.
> 
>     twoway  (rarea _at1_lci _at1_uci days, color(red%25)) ///
>                     (rarea _at2_lci _at2_uci days, color(blue%25)) ///
>                     (line _at1 days, sort lcolor(red)) ///
>                     (line _at2 days, sort lcolor(blue) lpattern(dash)) ///
>                     , legend(order(1 "No UDCA" 2 "UDCA") ring(0) cols(1) pos(
> 11) region(lwidth(none))) ///
>                     title("Time to `outcome'", justification(left) size(med) 
> )             ///
>                     yscale(range(0, 1))                                      
>                                                    ///
>                     ylabel(0 (1) 10, angle(0) format(%4.1f) labsize(small))  
>    ///
>                     xlabel(0 (200) 1035, labsize(small))                     
>                                            ///                     
>                     ytitle("Cumulative outcomes (%)", size(medsmall)) ///
>                     xtitle("Days since 1 Mar 2020", size(medsmall))          
>            ///
>                     graphregion(fcolor(white)) saving(adjcurv_`outcome', repl
> ace)
> 
>     graph export "./output/graphs/adjcurv_`outcome'.svg", as(svg) replace
> 
>     * Close window 
>     graph close
> 
> }
> */
. use ./output/an_dataset_died_covid_any, clear 

.     describe

Contains data from ./output/an_dataset_died_covid_any.dta
  obs:         2,946                          
 vars:            17                          22 Aug 2023 12:37
-------------------------------------------------------------------------------
              storage   display    value
variable name   type    format     label      variable label
-------------------------------------------------------------------------------
stp             str4    %9s                   
imd             byte    %8.0g                 
ethnicity       byte    %8.0g      eth5       
patient_id      int     %8.0g                 
male            float   %9.0g                 
eth_bin         float   %9.0g      eth2       
bmi_cat         float   %14.0g     bmi        
smoking         float   %14.0g     smok       
any_high_risk~n float   %9.0g                 
start           float   %9.0g                 
stop            float   %9.0g                 
died_covid_an~g byte    %8.0g                 
age_tv          float   %9.0g                 
udca            float   %9.0g                 
liver_trans     float   %9.0g                 
covid_vacc_fi~t float   %9.0g                 
severe_disease  float   %9.0g                 
-------------------------------------------------------------------------------
Sorted by: 

.     gen index_date = date("01/03/2020", "DMY")

.     stset stop, fail(died_covid_any_flag) id(patient_id) enter(index_date) or
> igin(index_date)

                id:  patient_id
     failure event:  died_covid_any_flag != 0 & died_covid_any_flag < .
obs. time interval:  (stop[_n-1], stop]
 enter on or after:  time index_date
 exit on or before:  failure
    t for analysis:  (time-origin)
            origin:  time index_date

------------------------------------------------------------------------------
      2,946  total observations
          0  exclusions
------------------------------------------------------------------------------
      2,946  observations remaining, representing
      1,000  subjects
        153  failures in single-failure-per-subject data
    651,528  total analysis time at risk and under observation
                                                at risk from t =         0
                                     earliest observed entry t =         0
                                          last observed exit t =     1,035

. 
.     * Add cumulative incidence plots 
.     * Not stratifying by stp as cannot use tvc and stratify 
.     
.     * Age and sex adjusted model 
.     * Setting df (degrees of freedom for restricted cubic splines) as 3 as th
> is is default 
.     * Setting dftvc (degrees of freedom for time-dependent effects) as 1 = li
> near effect of log time 
.     stpm2 udca age_tv male, tvc(udca age_tv) dftvc(1) df(3) scale(hazard) efo
> rm
note: delayed entry models are being fitted

Iteration 0:   log likelihood = -538.81569  
Iteration 1:   log likelihood = -538.01022  
Iteration 2:   log likelihood = -537.99121  
Iteration 3:   log likelihood =  -537.9912  

Log likelihood =  -537.9912                     Number of obs     =      2,915

------------------------------------------------------------------------------
             |     exp(b)   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
xb           |
        udca |   .9216879   .3367504    -0.22   0.823     .4503878    1.886171
      age_tv |   .9974974   .0040937    -0.61   0.541      .989506    1.005553
        male |     1.1322   .1857786     0.76   0.449     .8208283    1.561686
       _rcs1 |   3.197631   .6524391     5.70   0.000     2.143634    4.769865
       _rcs2 |   1.007298   .1018328     0.07   0.943     .8262394    1.228034
       _rcs3 |   .9652741   .0291286    -1.17   0.242     .9098387    1.024087
  _rcs_udca1 |   .8328461   .2606328    -0.58   0.559     .4510117    1.537948
_rcs_age_tv1 |   1.000247   .0034911     0.07   0.944     .9934274    1.007113
       _cons |   .0887007   .0192299   -11.17   0.000      .057995    .1356637
------------------------------------------------------------------------------
Note: Estimates are transformed only in the first equation.

.     summ _t

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
          _t |      2,946    526.7532    292.4179          1       1035

.     local tmax=r(max)

.     local tmaxplus1=r(max)+1

. 
.     range days 0 `tmax' `tmaxplus1'
(1,910 missing values generated)

.     stpm2_standsurv if udca == 1, at1(udca 0) at2(udca 1) timevar(days) ci co
> ntrast(difference) fail

. 
.     gen date = d(1/3/2020)+ days
(1,910 missing values generated)

.     format date %tddd_Month

. 
.     for var _at1 _at2 _at1_lci _at1_uci _at2_lci _at2_uci _contrast2_1 _contr
> ast2_1_lci _contrast2_1_uci: replace X=100*X

->  replace _at1=100*_at1
(1,035 real changes made)

->  replace _at2=100*_at2
(1,035 real changes made)

->  replace _at1_lci=100*_at1_lci
(1,035 real changes made)

->  replace _at1_uci=100*_at1_uci
(1,035 real changes made)

->  replace _at2_lci=100*_at2_lci
(1,035 real changes made)

->  replace _at2_uci=100*_at2_uci
(1,035 real changes made)

->  replace _contrast2_1=100*_contrast2_1
(1,035 real changes made)

->  replace _contrast2_1_lci=100*_contrast2_1_lci
(1,035 real changes made)

->  replace _contrast2_1_uci=100*_contrast2_1_uci
(1,035 real changes made)

. 
.     *cumulative mortality at last day of follow-up - write to file 
.     file write tablecontent ("Death") _tab ("No UDCA") _tab  

.     * cumulative outcome - no UDCA 
.     sum _at1 if days==`tmax'

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
        _at1 |          1    22.84937           .   22.84937   22.84937

.     file write tablecontent (r(mean)) _tab 

.     sum _at1_lci if days==`tmax'

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
    _at1_lci |          1    19.55117           .   19.55117   19.55117

.     file write tablecontent (r(mean)) _tab 

.     sum _at1_uci if days==`tmax'

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
    _at1_uci |          1    26.70395           .   26.70395   26.70395

.     file write tablecontent (r(mean)) _tab _n 

.     * cumulative outcome - UDCA 
.     file write tablecontent ("Death") _tab ("UDCA") _tab  

.     sum _at2 if days==`tmax'

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
        _at2 |          1    18.35611           .   18.35611   18.35611

.     file write tablecontent (r(mean)) _tab 

.     sum _at2_lci if days==`tmax'

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
    _at2_lci |          1    11.12213           .   11.12213   11.12213

.     file write tablecontent (r(mean)) _tab 

.     sum _at2_uci if days==`tmax'

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
    _at2_uci |          1    30.29518           .   30.29518   30.29518

.     file write tablecontent (r(mean)) _tab _n 

. 
.     *l date days _at1 _at1_lci _at1_uci _at2 _at2_lci _at2_uci if days<.
. 
.     twoway  (rarea _at1_lci _at1_uci days, color(red%25)) ///
>                     (rarea _at2_lci _at2_uci days, color(blue%25)) ///
>                     (line _at1 days, sort lcolor(red)) ///
>                     (line _at2 days, sort lcolor(blue) lpattern(dash)) ///
>                     , legend(order(1 "No UDCA" 2 "UDCA") ring(0) cols(1) pos(
> 11) region(lwidth(none))) ///
>                     title("Time to COVID-19 death", justification(left) size(
> med) )        ///
>                     yscale(range(0, 1))                                      
>                                                    ///
>                     ylabel(0 (0.2) 2, angle(0) format(%4.1f) labsize(small)) 
>    ///
>                     xlabel(0 (200) 1035, labsize(small))                     
>                                            ///                     
>                     ytitle("Cumulative mortality (%)", size(medsmall)) ///
>                     xtitle("Days since 1 Mar 2020", size(medsmall))          
>            ///
>                     graphregion(fcolor(white)) saving(adjcurv_`outcome', repl
> ace)
(note:  named style med not found in class gsize, default attributes used)
(note: file adjcurv_.gph not found)
(file adjcurv_.gph saved)

. 
.     graph export "./output/graphs/adjcurv_died_covid_any.svg", as(svg) replac
> e
(note: file ./output/graphs/adjcurv_died_covid_any.svg not found)
(file ./output/graphs/adjcurv_died_covid_any.svg written in SVG format)

. 
.     * Close window 
.     graph close

.     
. 
. * plot for each outcome - fully adjusted 
. foreach outcome in hosp_any composite_any {
  2.     use ./output/an_dataset_`outcome', clear 
  3.     describe
  4.     gen index_date = date("01/03/2020", "DMY")
  5.     stset stop, fail(`outcome'_flag) id(patient_id) enter(index_date) orig
> in(index_date)
  6. 
.     * Add cumulative incidence plots 
.     * Not stratifying by stp as cannot use tvc and stratify 
.     * Fully adjusted model (though not including wave as not right in main mo
> del)
.     * Setting df (degrees of freedom for restricted cubic splines) as 3 as th
> is is default 
.     * Setting dftvc (degrees of freedom for time-dependent effects) as 1 = li
> near effect of log time
.     * stpm2_standsurv cannot use factor variables so creating dummy variables
> :
.     tab imd, gen(imd) 
  7.     tab bmi_cat, gen(bmi_cat)
  8.     tab smoking, gen(smoking)
  9.     * Check all binary 
.     foreach vars in udca male any_high_risk_condition eth_bin imd1 imd2 imd3 
> imd4 imd5 bmi_cat1 bmi_cat2 bmi_cat3 ///
>     bmi_cat4 bmi_cat5 smoking1 smoking2 smoking3 severe_disease covid_vacc_fi
> rst liver_trans {
 10.         tab `vars', m nolabel
 11.         } 
 12.     
.     **** testing each additional variable to see why not fitting 
.     * fixed variables 
.     foreach var in any_high_risk_condition eth_bin imd1 imd2 imd3 imd4 imd5 b
> mi_cat1 bmi_cat2 bmi_cat3 ///
>     bmi_cat4 bmi_cat5 smoking1 smoking2 smoking3 {
 13. 
.         stpm2 udca male `var', tvc(udca age_tv) dftvc(1) df(1) scale(hazard) 
> eform
 14.     
.         summ _t
 15.         local tmax=r(max)
 16.         local tmaxplus1=r(max)+1
 17. 
.         range days 0 `tmax' `tmaxplus1'
 18.         stpm2_standsurv if udca == 1, at1(udca 0) at2(udca 1) timevar(days
> ) ci contrast(difference) fail
 19.         }
 20. 
.     * time-varying variables
.     foreach var in severe_disease covid_vacc_first liver_trans {
 21.     stpm2 udca male `var', ///
>         tvc(udca `var' age_tv) dftvc(1) df(1) scale(hazard) eform
 22.     
.         summ _t
 23.         local tmax=r(max)
 24.         local tmaxplus1=r(max)+1
 25. 
.         range days 0 `tmax' `tmaxplus1'
 26.         stpm2_standsurv if udca == 1, at1(udca 0) at2(udca 1) timevar(days
> ) ci contrast(difference) fail
 27.         }   
 28.     *** fully adjusted model to fit 
.     stpm2 udca male age_tv any_high_risk_condition eth_bin imd1 imd2 imd3 imd
> 4 imd5 bmi_cat1 bmi_cat2 bmi_cat3 ///
>     bmi_cat4 bmi_cat5 smoking1 smoking2 smoking3 severe_disease covid_vacc_fi
> rst liver_trans, ///
>      tvc(udca severe_disease covid_vacc_first liver_trans age_tv) dftvc(1) df
> (1) scale(hazard) eform
 29.     
.     summ _t
 30.     local tmax=r(max)
 31.     local tmaxplus1=r(max)+1
 32. 
.     range days 0 `tmax' `tmaxplus1'
 33.     stpm2_standsurv if udca == 1, at1(udca 0) at2(udca 1) timevar(days) ci
>  contrast(difference) fail
 34.     gen date = d(1/3/2020)+ days
 35.     format date %tddd_Month
 36. 
.     for var _at1 _at2 _at1_lci _at1_uci _at2_lci _at2_uci _contrast2_1 _contr
> ast2_1_lci _contrast2_1_uci: replace X=100*X
 37. 
.     *cumulative mortality at last day of follow-up
.     list _at1* if days==`tmax', noobs
 38.     list _at2* if days==`tmax', noobs
 39.     list _contrast* if days==`tmax', noobs
 40. 
.     *l date days _at1 _at1_lci _at1_uci _at2 _at2_lci _at2_uci if days<.
. 
.     twoway  (rarea _at1_lci _at1_uci days, color(red%25)) ///
>                     (rarea _at2_lci _at2_uci days, color(blue%25)) ///
>                     (line _at1 days, sort lcolor(red)) ///
>                     (line _at2 days, sort lcolor(blue) lpattern(dash)) ///
>                     , legend(order(1 "No UDCA" 2 "UDCA") ring(0) cols(1) pos(
> 11) region(lwidth(none))) ///
>                     title("Time to `outcome'", justification(left) size(med) 
> )             ///
>                     yscale(range(0, 1))                                      
>                                                    ///
>                     ylabel(0 (1) 10, angle(0) format(%4.1f) labsize(small))  
>    ///
>                     xlabel(0 (200) 1035, labsize(small))                     
>                                            ///                     
>                     ytitle("Cumulative outcomes (%)", size(medsmall)) ///
>                     xtitle("Days since 1 Mar 2020", size(medsmall))          
>            ///
>                     graphregion(fcolor(white)) saving(adjcurv_f_`outcome', re
> place)
 41. 
.     graph export "./output/graphs/adjcurv_f_`outcome'.svg", as(svg) replace
 42. 
.     * Close window 
.     graph close
 43. 
. }

Contains data from ./output/an_dataset_hosp_any.dta
  obs:         2,870                          
 vars:            18                          22 Aug 2023 12:37
-------------------------------------------------------------------------------
              storage   display    value
variable name   type    format     label      variable label
-------------------------------------------------------------------------------
stp             str4    %9s                   
imd             byte    %8.0g                 
ethnicity       byte    %8.0g      eth5       
patient_id      int     %8.0g                 
male            float   %9.0g                 
eth_bin         float   %9.0g      eth2       
bmi_cat         float   %14.0g     bmi        
smoking         float   %14.0g     smok       
any_high_risk~n float   %9.0g                 
start           float   %9.0g                 
stop            float   %9.0g                 
hosp_any_flag   float   %9.0g                 
age_tv          float   %9.0g                 
udca            float   %9.0g                 
liver_trans     float   %9.0g                 
covid_vacc_fi~t float   %9.0g                 
severe_disease  float   %9.0g                 
total_hosp      float   %9.0g                 
-------------------------------------------------------------------------------
Sorted by: 

                id:  patient_id
     failure event:  hosp_any_flag != 0 & hosp_any_flag < .
obs. time interval:  (stop[_n-1], stop]
 enter on or after:  time index_date
 exit on or before:  failure
    t for analysis:  (time-origin)
            origin:  time index_date

------------------------------------------------------------------------------
      2,870  total observations
          0  exclusions
------------------------------------------------------------------------------
      2,870  observations remaining, representing
      1,000  subjects
         58  failures in single-failure-per-subject data
    630,402  total analysis time at risk and under observation
                                                at risk from t =         0
                                     earliest observed entry t =         0
                                          last observed exit t =     1,035

        imd |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        605       21.08       21.08
          2 |        565       19.69       40.77
          3 |        505       17.60       58.36
          4 |        574       20.00       78.36
          5 |        455       15.85       94.22
          6 |        166        5.78      100.00
------------+-----------------------------------
      Total |      2,870      100.00

       bmi_cat |      Freq.     Percent        Cum.
---------------+-----------------------------------
   Underweight |        199        6.93        6.93
 Healthy range |      1,135       39.55       46.48
    Overweight |        565       19.69       66.17
         Obese |        785       27.35       93.52
Morbidly obese |        186        6.48      100.00
---------------+-----------------------------------
         Total |      2,870      100.00

       smoking |      Freq.     Percent        Cum.
---------------+-----------------------------------
  Never smoked |        277        9.65        9.65
Current smoker |      2,103       73.28       82.93
     Ex-smoker |        490       17.07      100.00
---------------+-----------------------------------
         Total |      2,870      100.00

       udca |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      2,582       89.97       89.97
          1 |        288       10.03      100.00
------------+-----------------------------------
      Total |      2,870      100.00

       male |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      1,398       48.71       48.71
          1 |      1,441       50.21       98.92
          . |         31        1.08      100.00
------------+-----------------------------------
      Total |      2,870      100.00

any_high_ri |
sk_conditio |
          n |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |      2,870      100.00      100.00
------------+-----------------------------------
      Total |      2,870      100.00

    eth_bin |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        407       14.18       14.18
          1 |      2,463       85.82      100.00
------------+-----------------------------------
      Total |      2,870      100.00

      imd== |
     1.0000 |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      2,265       78.92       78.92
          1 |        605       21.08      100.00
------------+-----------------------------------
      Total |      2,870      100.00

      imd== |
     2.0000 |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      2,305       80.31       80.31
          1 |        565       19.69      100.00
------------+-----------------------------------
      Total |      2,870      100.00

      imd== |
     3.0000 |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      2,365       82.40       82.40
          1 |        505       17.60      100.00
------------+-----------------------------------
      Total |      2,870      100.00

      imd== |
     4.0000 |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      2,296       80.00       80.00
          1 |        574       20.00      100.00
------------+-----------------------------------
      Total |      2,870      100.00

      imd== |
     5.0000 |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      2,415       84.15       84.15
          1 |        455       15.85      100.00
------------+-----------------------------------
      Total |      2,870      100.00

bmi_cat==Un |
  derweight |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      2,671       93.07       93.07
          1 |        199        6.93      100.00
------------+-----------------------------------
      Total |      2,870      100.00

bmi_cat==He |
althy range |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      1,735       60.45       60.45
          1 |      1,135       39.55      100.00
------------+-----------------------------------
      Total |      2,870      100.00

bmi_cat==Ov |
   erweight |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      2,305       80.31       80.31
          1 |        565       19.69      100.00
------------+-----------------------------------
      Total |      2,870      100.00

bmi_cat==Ob |
        ese |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      2,085       72.65       72.65
          1 |        785       27.35      100.00
------------+-----------------------------------
      Total |      2,870      100.00

bmi_cat==Mo |
     rbidly |
      obese |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      2,684       93.52       93.52
          1 |        186        6.48      100.00
------------+-----------------------------------
      Total |      2,870      100.00

smoking==Ne |
 ver smoked |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      2,593       90.35       90.35
          1 |        277        9.65      100.00
------------+-----------------------------------
      Total |      2,870      100.00

smoking==Cu |
      rrent |
     smoker |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        767       26.72       26.72
          1 |      2,103       73.28      100.00
------------+-----------------------------------
      Total |      2,870      100.00

smoking==Ex |
    -smoker |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      2,380       82.93       82.93
          1 |        490       17.07      100.00
------------+-----------------------------------
      Total |      2,870      100.00

severe_dise |
        ase |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      1,130       39.37       39.37
          1 |      1,740       60.63      100.00
------------+-----------------------------------
      Total |      2,870      100.00

covid_vacc_ |
      first |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      2,335       81.36       81.36
          1 |        535       18.64      100.00
------------+-----------------------------------
      Total |      2,870      100.00

liver_trans |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      2,846       99.16       99.16
          1 |         24        0.84      100.00
------------+-----------------------------------
      Total |      2,870      100.00
note: delayed entry models are being fitted
note: any_high_risk_condition omitted because of collinearity

Iteration 0:   log likelihood = -262.09108  
Iteration 1:   log likelihood = -260.91849  
Iteration 2:   log likelihood = -260.90124  
Iteration 3:   log likelihood = -260.90122  

Log likelihood = -260.90122                     Number of obs     =      2,839

------------------------------------------------------------------------------
             |     exp(b)   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
xb           |
        udca |   .8249334   .4930146    -0.32   0.747     .2556851    2.661536
        male |    1.15303    .304013     0.54   0.589     .6877156    1.933179
any_high_r~n |          1  (omitted)
       _rcs1 |   3.143962   .8041601     4.48   0.000     1.904398    5.190354
  _rcs_udca1 |   .9581113   .5061151    -0.08   0.935      .340232    2.698092
_rcs_age_tv1 |   1.001789   .0047777     0.37   0.708     .9924685    1.011197
       _cons |   .0309215   .0067614   -15.90   0.000     .0201435    .0474663
------------------------------------------------------------------------------
Note: Estimates are transformed only in the first equation.

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
          _t |      2,870    518.9084    292.2321          1       1035
(1,834 missing values generated)
stpm2_standsurv does not allow factor variables
Refit the model using dummy variables etc
r(198);

end of do-file
r(198);

end of do-file

r(198);


